import{r as g,j as n,I as Ae}from"./index-CNdVkFF5.js";import{s as ze,b as Ee,a as Be,g as Le,i as Pe,P as Ne,c as $e,l as _e}from"./sajuExtras-LbL1oaer.js";import{a as Ie,i as Se,j as Te}from"./cookieUtils-fixozt5I.js";import{S as Ge}from"./ShareModal-DxElo6DM.js";function _(e){return String(e).padStart(2,"0")}function b(e){const r=Number(e);return Number.isFinite(r)?r.toFixed(2):"0.00"}function Ce(){const e=new Date(Date.now()+324e5);return{y:e.getUTCFullYear(),m:e.getUTCMonth()+1,d:e.getUTCDate()}}function Ue(){const e=Ce();return`${e.y}-${_(e.m)}-${_(e.d)}`}const We=120,Ye=.6;function Ke(e){let r=2166136261;for(let s=0;s<e.length;s++)r^=e.charCodeAt(s),r=Math.imul(r,16777619);return r>>>0}function qe(e){return function(){let r=(e+=1831565813)>>>0;return r=Math.imul(r^r>>>15,r|1),r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}}const W={목:Array.from({length:9},(e,r)=>1+r),화:Array.from({length:9},(e,r)=>10+r),토:Array.from({length:9},(e,r)=>19+r),금:Array.from({length:9},(e,r)=>28+r),수:Array.from({length:9},(e,r)=>37+r)},R=["목","화","토","금","수"],Je=e=>R[(R.indexOf(e)+4)%5],Oe=e=>R[(R.indexOf(e)+1)%5],Qe=e=>R[(R.indexOf(e)+2)%5],ke=e=>R[(R.indexOf(e)+3)%5];function q(e){if(e===""||e===null||e===void 0)return null;const r=Number(e);return Number.isFinite(r)&&r>=0&&r<=23?r:null}function Ve(e){var H,F,O,k,M,S,I,$;if(!e)return null;if((H=e==null?void 0:e.sajuResult)!=null&&H.year&&((F=e==null?void 0:e.sajuResult)!=null&&F.month)&&((O=e==null?void 0:e.sajuResult)!=null&&O.day)&&((k=e==null?void 0:e.sajuResult)!=null&&k.hour))return e;const r=e.calendar||"solar",s=Number(e.year),t=Number(e.month),m=Number(e.day),u=(M=q(e.hour))!=null?M:12,d=Number((S=e.minute)!=null?S:0),w=e.leapMonth==="leap"||e.isLeap===!0;let l,a,i;if(typeof e.solarDate=="string"){const E=String(e.solarDate).match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);E&&(l=Number(E[1]),a=Number(E[2]),i=Number(E[3]))}if(!l||!a||!i)if(r==="lunar"){const E=_e(s,t,m,w),L=E instanceof Date?E:new Date(E);l=L.getFullYear(),a=L.getMonth()+1,i=L.getDate()}else l=s,a=t,i=m;const v=$e(l,a,i,u,d);return{...e,calendar:r,solarDate:`${l}-${_(a)}-${_(i)}`,sajuResult:v,year:s,month:t,day:m,hour:(I=e.hour)!=null?I:"",minute:($=e.minute)!=null?$:"0"}}function Xe(){const e=Ce();return $e(e.y,e.m,e.d,12,0)}function Ze(e,r){const s=Object.entries(r).filter(([,u])=>u>0),t=s.reduce((u,[,d])=>u+d,0);if(!s.length||t<=0)return null;let m=e()*t;for(const[u,d]of s){if(m<d)return u;m-=d}return s[s.length-1][0]}function et(e,r,s,t,m){const u=(e.목+e.화+e.토+e.금+e.수)/5,d={목:Math.max(0,u-(e.목||0)),화:Math.max(0,u-(e.화||0)),토:Math.max(0,u-(e.토||0)),금:Math.max(0,u-(e.금||0)),수:Math.max(0,u-(e.수||0))};if(r){const l=(a,i)=>d[a]=Math.max(0,(d[a]||0)+i);s.level==="신약"?(l(Je(r),1),l(Oe(r),.35),l(r,.25)):s.level==="신강"?(l(ke(r),.85),l(Qe(r),.35),d[r]=Math.max(0,(d[r]||0)-.25)):(l(Oe(r),.15),l(ke(r),.15))}const w=.25;if(["목","화","토","금","수"].forEach(l=>{const a=(t[l]||0)*w;d[l]=Math.max(0,(d[l]||0)+a)}),m&&m.length)for(const l of m)d[l]=Math.max(0,(d[l]||0)+.6);return d}function tt(e){return e>=1&&e<=9?"목":e>=10&&e<=18?"화":e>=19&&e<=27?"토":e>=28&&e<=36?"금":e>=37&&e<=45?"수":""}function Me(e){switch(e){case"목":return"el-wood";case"화":return"el-fire";case"토":return"el-earth";case"금":return"el-metal";case"수":return"el-water";default:return""}}function rt(e,r){var l;const s={목:[...W.목],화:[...W.화],토:[...W.토],금:[...W.금],수:[...W.수]},t=new Set,m=[],u={},d=Object.entries(r).sort((a,i)=>i[1]-a[1]).map(([a])=>a),w={...r};for(let a=0;a<6;a++){let i=Ze(e,w)||d[a%d.length];w[i]=Math.max(0,(w[i]||0)*.88);let v=null,H=0;for(;H++<16;){if(!((l=s[i])!=null&&l.length)){const k=Object.keys(s).filter(M=>s[M].length>0);if(!k.length)break;i=k[Math.floor(e()*k.length)]}const F=Math.floor(e()*s[i].length),O=s[i][F];if(!t.has(O)){v=O,s[i].splice(F,1);break}}v!=null&&(t.add(v),m.push(v),u[v]=i)}return m.sort((a,i)=>a-i),{main:m,mapping:u}}const Y=["목","화","토","금","수"];function nt(e){if(!e||typeof window=="undefined")return null;let r=e.parentElement;for(;r;){const s=window.getComputedStyle(r);if(/(auto|scroll|overlay)/.test(s.overflowY)||/(auto|scroll|overlay)/.test(s.overflow))return r;r=r.parentElement}return null}function K(e){if(e)return{scrollTop:e.scrollTop,clientHeight:e.clientHeight,scrollHeight:e.scrollHeight};const r=document.scrollingElement||document.documentElement;return{scrollTop:r.scrollTop,clientHeight:window.innerHeight||r.clientHeight,scrollHeight:r.scrollHeight}}const ct=()=>{var L,J,Q,V,X,Z,ee,te,re,ne,se,oe,le,ie,ce,ae,de,ue,he,pe;const e="로또 숫자",[r,s]=g.useState([]),[t,m]=g.useState(null),[u,d]=g.useState(null),[w,l]=g.useState(null),[a,i]=g.useState(null),[v,H]=g.useState(!1),[F,O]=g.useState(!1),k=g.useRef(null),M=g.useRef(null),S=g.useRef(!1),I=g.useRef(0),$=g.useRef(!1),E=g.useMemo(()=>Ue(),[]);return g.useEffect(()=>{ze({title:`${e} | 운세뉴스`,description:"쿠키의 생년월일과 오늘 사주를 반영해 확률 가중 추출한 6/45 숫자(5세트).",path:"/#/lotto",image:"/og-image.png"})},[]),g.useEffect(()=>{var me,xe,ge,be,je,ye,we,ve;let o=null;try{o=Ie()}catch{}if(!!!(o&&o.year&&o.month&&o.day)){H(!0);return}H(!1);const T=Xe();l(T);const C=Ee(T,{includeHidden:!1}),p=Ve(o),x=p.sajuResult;d(x);const G={y:p.year,m:p.month,d:p.day,hh:(me=q(p.hour))!=null?me:12,mm:Number((xe=p.minute)!=null?xe:0),gender:p.gender||"unknown",yearStem:(ge=x==null?void 0:x.year)==null?void 0:ge.stem},y=Be(x,{birth:G});i(y);const P=Ee(x,{includeHidden:!0}),D=Le((be=x==null?void 0:x.day)==null?void 0:be.stem),c=Pe(x),N=[].concat((je=y==null?void 0:y.yongshin)!=null&&je.primary?[y.yongshin.primary]:[]).concat((ye=y==null?void 0:y.yongshin)!=null&&ye.secondary?[y.yongshin.secondary]:[]).filter(Boolean),f=et(P,D,c,C,N),A=Y.reduce((h,B)=>h+(f[B]||0),0)||1,U=Object.fromEntries(Y.map(h=>[h,(f[h]||0)/A])),z=Object.fromEntries(Y.map(h=>[h,U[h]*6])),Fe=[p.calendar||"solar",`${p.year}-${p.month}-${p.day}`,`${_((we=q(p.hour))!=null?we:12)}:${_(Number(p.minute||0))}`,p.gender||"",((ve=x==null?void 0:x.day)==null?void 0:ve.stem)||""].join("|"),De=`lotto5-weighted|${E}|${Fe}`,fe=[];for(let h=1;h<=5;h++){const B=qe(Ke(`${De}|G${h}`));fe.push(rt(B,f))}s(fe);const Re=Object.entries(P).sort((h,B)=>h[1]-B[1]).map(([h])=>h),He=Object.entries(C).sort((h,B)=>B[1]-h[1]).map(([h])=>h);m({baseWeights:f,probs:U,expected:z,myCounts:P,todayCounts:C,dm:D,strength:c,weakestOrder:Re,todayTop:He,yongEls:N})},[E]),g.useEffect(()=>{if(v||typeof window=="undefined")return;const o=nt(k.current),j=Array.from(new Set([o,window])).filter(Boolean),T=Math.max(48,Math.round((window.innerHeight||0)*.08)),{scrollTop:C}=K(o||null);I.current=C,$.current=!1;const p=c=>{const{clientHeight:N,scrollHeight:f}=K(c===window?null:c);return f-N>80},x=c=>{if(S.current||!$.current||!p(c)||Se())return;const{scrollTop:N,clientHeight:f,scrollHeight:A}=K(c===window?null:c);N+f>=A-T&&(S.current=!0,Te(),O(!0))};let G=!1;const y=()=>{G||(G=!0,requestAnimationFrame(()=>{G=!1;const{scrollTop:c,clientHeight:N,scrollHeight:f}=K(o||null),A=Math.abs(c-I.current),U=f>0?(c+N)/f:0;!$.current&&(A>=We||U>=Ye)&&($.current=!0);for(const z of j)if(x(z),S.current)break}))},P=()=>{if(!(!$.current||S.current)){for(const c of j)if(x(c),S.current)break}};for(const c of j)c.addEventListener("scroll",y,{passive:!0});window.addEventListener("resize",P);const D=[];if("IntersectionObserver"in window){const c=M==null?void 0:M.current;if(c){const N=f=>new IntersectionObserver(A=>{A.some(z=>z.isIntersecting)&&!S.current&&$.current&&p(f)&&!Se()&&(S.current=!0,Te(),O(!0),D.forEach(z=>z.disconnect()))},{root:f===window?null:f,threshold:1,rootMargin:"0px"});o&&D.push(N(o)),D.push(N(window)),D.forEach(f=>f.observe(c))}}return()=>{for(const c of j)c.removeEventListener("scroll",y);window.removeEventListener("resize",P),D.forEach(c=>c.disconnect())}},[v]),v?n.jsx("section",{className:"calculator","aria-label":"안내",children:n.jsx(Ae,{homeHref:"/"})}):n.jsxs("section",{ref:k,className:"calculator","aria-label":`${e} 페이지`,children:[n.jsxs("div",{className:"card result",children:[n.jsx("h2",{children:e}),(u||w)&&n.jsxs("div",{className:"row cols-2 sm-cols-1",style:{marginTop:16},children:[n.jsxs("section",{style:{display:"grid",gap:8},children:[n.jsx("h3",{className:"h4",style:{margin:0},children:"내 사주 기둥"}),u?n.jsx(Ne,{pillars:u,idPrefix:"my"}):n.jsx("p",{className:"muted",style:{margin:0},children:"내 정보가 없어 표시할 수 없습니다."})]}),n.jsxs("section",{style:{display:"grid",gap:8},children:[n.jsx("h3",{className:"h4",style:{margin:0},children:"오늘 사주 기둥 (정오 기준)"}),w?n.jsx(Ne,{pillars:w,idPrefix:"today"}):n.jsx("p",{className:"muted",style:{margin:0},children:"오늘 기둥 계산에 실패했습니다."})]})]}),n.jsx("div",{className:"per-game",style:{marginTop:12},children:r.map((o,j)=>n.jsxs("div",{className:"chips-line",children:[n.jsxs("span",{className:"chip-badge","aria-hidden":!0,children:["G",j+1]}),n.jsx("div",{className:"chips",role:"list","aria-label":`게임 ${j+1} 번호`,children:o.main.map(T=>{const C=o.mapping[T]||tt(T);return n.jsxs("span",{className:"chip",role:"listitem","aria-label":`번호 ${T} • ${C}`,children:[n.jsx("b",{children:String(T).padStart(2,"0")}),n.jsx("i",{className:`ball ${Me(C)}`,"aria-hidden":!0,children:C})]},`n-${j}-${T}`)})})]},`pg-${j}`))}),n.jsxs("div",{className:"info-box",style:{marginTop:12},children:[n.jsx("div",{className:"mini-title",children:"오행 가중치·확률표 (초기 기준)"}),n.jsxs("div",{className:"prob-wrap",children:[n.jsxs("table",{className:"prob-table","aria-label":"오행 가중치 확률표",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"오행"}),n.jsx("th",{children:"번호 범위"}),n.jsx("th",{children:"가중치"}),n.jsx("th",{children:"확률"}),n.jsx("th",{children:"예상 개수 (6개 중)"})]})}),n.jsx("tbody",{children:Y.map(o=>n.jsxs("tr",{children:[n.jsx("td",{className:`elname ${Me(o)}`,children:o}),n.jsx("td",{children:o==="목"?"1–9":o==="화"?"10–18":o==="토"?"19–27":o==="금"?"28–36":"37–45"}),n.jsx("td",{children:t?b(t.baseWeights[o]):"0.00"}),n.jsx("td",{children:t?`${b((t.probs[o]||0)*100)}%`:"0.00%"}),n.jsx("td",{children:t?b(t.expected[o]):"0.00"})]},`row-${o}`))}),n.jsx("tfoot",{children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:2,children:"합계"}),n.jsx("td",{children:t?b(Y.reduce((o,j)=>o+(t.baseWeights[j]||0),0)):"0.00"}),n.jsx("td",{children:"100.00%"}),n.jsx("td",{children:"6.00"})]})})]}),n.jsxs("p",{className:"helper",style:{marginTop:6},children:["* 표는 ",n.jsx("em",{children:"초기 확률"}),"을 나타냅니다. 실제 추출 중에는 같은 오행 반복을 줄이기 위해 선택 직후 해당 오행 가중치가 감쇄(×0.88)되어 결과가 다소 달라질 수 있습니다."]})]})]}),n.jsxs("div",{className:"info-box",style:{marginTop:12},children:[n.jsx("strong",{style:{display:"block",marginBottom:8},children:"왜 이 숫자인가요?"}),n.jsxs("ul",{className:"why-list",children:[n.jsxs("li",{children:[n.jsx("b",{children:"가중치(Weights)"}),"는 내 사주 오행 분포(간·지·장간)에서 상대적으로 부족한 오행을 보정하고, 일간(",(t==null?void 0:t.dm)||"—",")의 상태(",((L=t==null?void 0:t.strength)==null?void 0:L.level)||"—",")에 따라",((J=t==null?void 0:t.strength)==null?void 0:J.level)==="신약"?" 인성·식상을 가산":((Q=t==null?void 0:t.strength)==null?void 0:Q.level)==="신강"?" 재성·관성을 가산":" 순환 항목을 소폭 가산","했으며, 오늘(정오) 사주의 강한 오행(",((V=t==null?void 0:t.todayTop)==null?void 0:V.slice(0,2).join(", "))||"—",")과",(X=t==null?void 0:t.yongEls)!=null&&X.length?` 용신(${t.yongEls.join(", ")})`:" ","에 소폭 가점을 더했습니다."]}),(t==null?void 0:t.myCounts)&&n.jsxs("li",{children:[n.jsx("b",{children:"내 오행 분포"})," (간·지·장간): 목 ",b((Z=t.myCounts)==null?void 0:Z.목),", 화 ",b((ee=t.myCounts)==null?void 0:ee.화),", 토 ",b((te=t.myCounts)==null?void 0:te.토),", 금 ",b((re=t.myCounts)==null?void 0:re.금),", 수 ",b((ne=t.myCounts)==null?void 0:ne.수),t!=null&&t.weakestOrder?n.jsxs(n.Fragment,{children:[" · ",n.jsx("em",{children:"부족순:"})," ",t.weakestOrder.join(" → ")," "]}):null]}),n.jsxs("li",{children:[n.jsx("b",{children:"오늘 오행 분포"})," (정오 기준): 목 ",b((oe=(se=t==null?void 0:t.todayCounts)==null?void 0:se.목)!=null?oe:0),", 화 ",b((ie=(le=t==null?void 0:t.todayCounts)==null?void 0:le.화)!=null?ie:0),", 토 ",b((ae=(ce=t==null?void 0:t.todayCounts)==null?void 0:ce.토)!=null?ae:0),", 금 ",b((ue=(de=t==null?void 0:t.todayCounts)==null?void 0:de.금)!=null?ue:0),", 수 ",b((pe=(he=t==null?void 0:t.todayCounts)==null?void 0:he.수)!=null?pe:0)]}),n.jsxs("li",{children:[n.jsx("b",{children:"추출 로직"}),": 오행을 확률적으로 선택→해당 오행의 번호군(목 1–9, 화 10–18, 토 19–27, 금 28–36, 수 37–45)에서 중복 없이 6개 추출(선택된 오행은 감쇄×0.88로 편중 억제)."]})]})]}),n.jsx("div",{ref:M,style:{height:1}})]}),F&&n.jsx(Ge,{isOpen:F,onClose:()=>O(!1),pageTitle:e,shareText:"내용이 도움이 되셨다면 지금 공유해보시겠어요?"}),n.jsx("style",{children:`
        .muted{ color: var(--ink-soft,#6b7280); }

        .per-game .chips-line{ display:flex; align-items:center; gap:10px; padding: 6px 0; }
        .chip-badge{
          padding: 3px 8px; border:1px solid var(--border,#e5e7eb); border-radius:999px;
          font-size: 12px; background: var(--surface,#fff); color:var(--ink-soft,#6b7280); flex: none;
        }
        .chips{ display:grid; grid-template-columns: repeat(6, minmax(0, 1fr)); gap:8px; width:100%; }
        .chip{
          display:flex; align-items:center; justify-content:center; gap:8px;
          padding:10px 12px; border:1px solid var(--border,#e5e7eb); border-radius:12px; background:var(--surface,#fff);
          min-width:0; white-space: nowrap;
        }
        .chip b{ font-size:16px; letter-spacing:0.02em; line-height:1; }

        .ball{
          display:inline-flex; align-items:center; justify-content:center;
          width:22px; height:22px; border-radius:999px; line-height:1;
          font-style:normal; font-weight:800; font-size:12px;
          border:1px solid var(--border,#e5e7eb);
          background:var(--muted,#f3f4f6); color:var(--ink-soft,#6b7280);
          user-select:none;
        }

        .ball.el-wood, .elname.el-wood{ color:#166534; background:#E8F5E9; border-color:#BFE7CC; }
        .ball.el-fire, .elname.el-fire{ color:#7F1D1D; background:#FEE2E2; border-color:#FBC6C6; }
        .ball.el-earth, .elname.el-earth{ color:#713F12; background:#FEF3C7; border-color:#F3E2A6; }
        .ball.el-metal, .elname.el-metal{ color:#1F2937; background:#E5E7EB; border-color:#D1D5DB; }
        .ball.el-water, .elname.el-water{ color:#1E3A8A; background:#DBEAFE; border-color:#BFDBFE; }

        .info-box{ border:1px solid var(--border,#e5e7eb); border-radius:12px; padding:12px; background:var(--surface,#fff); }
        .why-list{ list-style:none; padding-left:0; margin:8px 0 0; }
        .why-list li{ margin:6px 0; line-height:1.6; color:var(--ink); }

        .prob-wrap{ margin-top:6px; overflow:auto; }
        .prob-table{ width:100%; border-collapse: collapse; font-size:14px; }
        .prob-table th, .prob-table td{ border:1px solid var(--border,#e5e7eb); padding:8px 10px; text-align:center; }
        .prob-table thead th{ background:var(--muted,#f9fafb); font-weight:800; }
        .prob-table tfoot td{ background:var(--muted,#fafafa); font-weight:700; }

        @media (max-width: 640px){
          .per-game .chips-line{ gap: clamp(6px, 1.6vw, 10px); }
          .chips{ gap: clamp(4px, 1.4vw, 8px); }
          .chip{ padding: clamp(5px, 1.4vw, 10px) clamp(6px, 1.8vw, 12px); gap: clamp(3px, 1.2vw, 8px); }
          .chip b{ font-size: clamp(11px, 3.2vw, 16px); }
          .ball{ width: clamp(14px, 4.2vw, 22px); height: clamp(14px, 4.2vw, 22px); font-size: clamp(8px, 2.6vw, 12px); }
          .prob-table{ font-size: 13px; }
          .prob-table th, .prob-table td{ padding:6px 8px; }
        }
        @media (max-width: 380px){ .chips{ grid-template-columns: repeat(3, minmax(0, 1fr)); } }
        @media (max-width: 320px){
          .chips{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
          .chip{ padding: 3px 6px; gap: 2px; }
          .chip b{ font-size: 10px; }
          .ball{ width: 12px; height: 12px; font-size: 7px; }
          .prob-table{ font-size: 12px; }
        }
      `})]})};export{ct as default};

import{j as i,a as J,r as v}from"./index-BUdIPcLE.js";import{F as V,E as Q,t as H,B as D}from"./cookieUtils-HqKrucY_.js";const X={ê°‘:"ç”²",ì„:"ä¹™",ë³‘:"ä¸™",ì •:"ä¸",ë¬´:"æˆŠ",ê¸°:"å·±",ê²½:"åºš",ì‹ :"è¾›",ì„:"å£¬",ê³„:"ç™¸"},Z={ì:"å­",ì¶•:"ä¸‘",ì¸:"å¯…",ë¬˜:"å¯",ì§„:"è¾°",ì‚¬:"å·³",ì˜¤:"åˆ",ë¯¸:"æœª",ì‹ :"ç”³",ìœ :"é…‰",ìˆ :"æˆŒ",í•´:"äº¥"};function ee(r){if(!r)return"";const t=String(r).trim();return/^[ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸]$/.test(t)?t:X[t]||t}function te(r){if(!r)return"";const t=String(r).trim();return/^[å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥]$/.test(t)?t:Z[t]||t}function re(r){return r?Array.isArray(r)?r.map(t=>t||{stem:"",branch:""}):[r.year,r.month,r.day,r.hour].map(t=>t||{stem:"",branch:""}):[]}function _(r){return V[r]||""}function B(r){return Q[r]||""}const je=({pillars:r,idPrefix:t=""})=>{const e=re(r),n=["ì—°","ì›”","ì¼","ì‹œ"],a=["year","month","day","hour"];return i.jsx("div",{className:"pillars",children:e.map((o,s)=>{const c=ee(o?.stem),l=te(o?.branch),p=_(c)||_(o?.stem),d=_(l)||_(o?.branch),g=a[s],x=t?`${t}-${g}`:void 0;return i.jsxs("div",{className:"pillar","data-type":g,id:x,children:[i.jsx("h3",{children:n[s]}),i.jsxs("div",{className:"pill",children:[i.jsx("span",{className:p,children:c||"â€”"}),i.jsx("span",{children:"Â·"}),i.jsx("span",{className:d,children:l||"â€”"})]}),i.jsx("div",{className:"gx",children:[B(p),B(d)].filter(Boolean).join(" Â· ")})]},s)})})},S=["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"],E=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],N={ç”²:"wood",ä¹™:"wood",ä¸™:"fire",ä¸:"fire",æˆŠ:"earth",å·±:"earth",åºš:"metal",è¾›:"metal",å£¬:"water",ç™¸:"water"},M={ç”²:1,ä¸™:1,æˆŠ:1,åºš:1,å£¬:1,ä¹™:0,ä¸:0,å·±:0,è¾›:0,ç™¸:0},ne={å­:"water",ä¸‘:"earth",å¯…:"wood",å¯:"wood",è¾°:"earth",å·³:"fire",åˆ:"fire",æœª:"earth",ç”³:"metal",é…‰:"metal",æˆŒ:"earth",äº¥:"water"},b=(r,t)=>(r%t+t)%t,oe={å­:["ç™¸"],ä¸‘:["å·±","ç™¸","è¾›"],å¯…:["ç”²","ä¸™","æˆŠ"],å¯:["ç”²","ä¹™"],è¾°:["æˆŠ","ä¹™","ç™¸"],å·³:["ä¸™","æˆŠ","åºš"],åˆ:["ä¸™","å·±","ä¸"],æœª:["å·±","ä¹™","ä¸"],ç”³:["æˆŠ","å£¬","åºš"],é…‰:["è¾›"],æˆŒ:["æˆŠ","è¾›","ä¸"],äº¥:["æˆŠ","ç”²","å£¬"]},ae={å­:"ç™¸",ä¸‘:"å·±",å¯…:"ç”²",å¯:"ä¹™",è¾°:"æˆŠ",å·³:"ä¸™",åˆ:"ä¸™",æœª:"å·±",ç”³:"åºš",é…‰:"è¾›",æˆŒ:"æˆŠ",äº¥:"å£¬"},se=["ì¥ìƒ","ëª©ìš•","ê´€ëŒ€","ê±´ë¡","ì œì™•","ì‡ ","ë³‘","ì‚¬","ë¬˜","ì ˆ","íƒœ","ì–‘"],ie={ç”²:11,ä¹™:6,ä¸™:2,ä¸:9,æˆŠ:2,å·±:9,åºš:5,è¾›:0,å£¬:8,ç™¸:3},ce={äº¥:{ç”³:"ê²ì‚´",å¯:"ìœ¡í•´ì‚´",äº¥:"ë§ì‹ ì‚´",åˆ:"ì¬ì‚´"}};function $(r,t){if(!r||!t)return"";const e=N[r],n=N[t],a=M[r],o=M[t];return n===e?a===o?"ë¹„ê²¬":"ê²ì¬":e==="wood"&&n==="fire"||e==="fire"&&n==="earth"||e==="earth"&&n==="metal"||e==="metal"&&n==="water"||e==="water"&&n==="wood"?a===o?"ì‹ì‹ ":"ìƒê´€":n==="wood"&&e==="fire"||n==="fire"&&e==="earth"||n==="earth"&&e==="metal"||n==="metal"&&e==="water"||n==="water"&&e==="wood"?a===o?"ì •ì¸":"í¸ì¸":e==="wood"&&n==="earth"||e==="fire"&&n==="metal"||e==="earth"&&n==="water"||e==="metal"&&n==="wood"||e==="water"&&n==="fire"?a===o?"í¸ì¬":"ì •ì¬":n==="wood"&&e==="earth"||n==="fire"&&e==="metal"||n==="earth"&&e==="water"||n==="metal"&&e==="wood"||n==="water"&&e==="fire"?a===o?"í¸ê´€":"ì •ê´€":""}function le(r,t){const e=ie[r];if(e==null)return"";const n=E.indexOf(t);if(n<0)return"";const a=M[r]?1:-1,o=b((n-e)*a,12);return se[o]||""}function de(r,t){const e=ce[r];return e&&e[t]||""}function fe(r,t,e){if(!e||!e.useLocalSolar)return{hour:r,minute:t};const n=typeof e.longitude=="number"?e.longitude:126.9784,a=Math.round((135-n)*4);let o=r*60+t-a;return o=b(o,1440),{hour:Math.floor(o/60),minute:o%60}}function ue(r,t,e){let n=r;(t===1||t===2&&e<4)&&(n=r-1);const o=n-1984;return{stem:S[b(o,10)],branch:E[b(o,12)]}}function me(r,t,e,n){let a;t===2&&e>=4||t===3&&e<5?a=2:t===3&&e>=5||t===4&&e<4?a=3:t===4&&e>=4||t===5&&e<5?a=4:t===5&&e>=5||t===6&&e<5?a=5:t===6&&e>=5||t===7&&e<7?a=6:t===7&&e>=7||t===8&&e<7?a=7:t===8&&e>=7||t===9&&e<7?a=8:t===9&&e>=7||t===10&&e<8?a=9:t===10&&e>=8||t===11&&e<7?a=10:t===11&&e>=7||t===12&&e<7?a=11:t===12&&e>=7||t===1&&e<5?a=0:a=1;const o=S.indexOf(n);let s;o===0||o===5?s=2:o===1||o===6?s=4:o===2||o===7?s=6:o===3||o===8?s=8:s=0;const c=b(s+b(a-2,12),10);return{stem:S[c],branch:E[a]}}function he(r,t,e,n=0,a=0){let o=H(r,t,e);n*60+a>=1410&&(o+=1);const s=H(1912,2,18),c=o-s;return{stem:S[b(c,10)],branch:E[b(c,12)]}}function be(r,t=0,e=0){const n=t*60+e,a=b(n-1410,1440),o=Math.floor(a/120),s=E[b(o,12)],c=S.indexOf(r);let l;return c===0||c===5?l=0:c===1||c===6?l=2:c===2||c===7?l=4:c===3||c===8?l=6:l=8,{stem:S[b(l+o,10)],branch:s}}function pe(r,t,e){const n=[[1,5,"ì†Œí•œ"],[1,20,"ëŒ€í•œ"],[2,4,"ì…ì¶˜"],[2,19,"ìš°ìˆ˜"],[3,6,"ê²½ì¹©"],[3,21,"ì¶˜ë¶„"],[4,5,"ì²­ëª…"],[4,20,"ê³¡ìš°"],[5,6,"ì…í•˜"],[5,21,"ì†Œë§Œ"],[6,6,"ë§ì¢…"],[6,21,"í•˜ì§€"],[7,7,"ì†Œì„œ"],[7,23,"ëŒ€ì„œ"],[8,7,"ì…ì¶”"],[8,23,"ì²˜ì„œ"],[9,7,"ë°±ë¡œ"],[9,23,"ì¶”ë¶„"],[10,8,"í•œë¡œ"],[10,23,"ìƒê°•"],[11,7,"ì…ë™"],[11,22,"ì†Œì„¤"],[12,7,"ëŒ€ì„¤"],[12,22,"ë™ì§€"]],a=new Date(r,t-1,e);let o=n[0][2];for(const[s,c,l]of n){const p=new Date(r,s-1,c);a>=p&&(o=l)}return{name:o}}function Ae(r,t,e,n=0,a=0,o={}){const{hour:s,minute:c}=fe(n,a,o),l=ue(r,t,e),p=me(r,t,e,l.stem),d=he(r,t,e,s,c),g=be(d.stem,s,c),x=pe(r,t,e),w=f=>{const j=oe[f.branch]||[],A=ae[f.branch]||j[0];return{...f,tenGodStem:$(d.stem,f.stem),tenGodBranch:A?$(d.stem,A):"",hiddenStems:j,lifeStage:le(d.stem,f.branch),shinsal:de(d.branch,f.branch)||"",elemStem:N[f.stem],elemBranch:ne[f.branch]}};return{year:w(l),month:w(p),day:w(d),hour:w(g),season:x}}const ye={},R="ìš´ì„¸ë‰´ìŠ¤",ge=ye?.VITE_SITE_URL&&String(void 0)||(typeof window<"u"?window.location.origin:"https://idcode1690.github.io/unse");function m(r,t){const e=Object.entries(t).map(([a,o])=>`[${a}="${o}"]`).join("");let n=document.head.querySelector(`${r}${e}`);return n||(n=document.createElement(r),Object.entries(t).forEach(([a,o])=>n.setAttribute(a,o)),document.head.appendChild(n)),n}function xe(r){return!r||!r.trim()?R:r.includes(R)?r:`${r} | ${R}`}function ke({title:r,description:t,path:e="/",image:n="/og-image.png",noIndex:a=!1}){const o=`${ge}${e.startsWith("#")||e.startsWith("/")?e:`/${e}`}`,s=xe(r);document.title=s,t&&m("meta",{name:"description"}).setAttribute("content",t),m("meta",{name:"robots"}).setAttribute("content",a?"noindex,nofollow":"index,follow"),m("link",{rel:"canonical"}).setAttribute("href",o),m("meta",{property:"og:title"}).setAttribute("content",s),m("meta",{property:"og:description"}).setAttribute("content",t||""),m("meta",{property:"og:type"}).setAttribute("content","website"),m("meta",{property:"og:url"}).setAttribute("content",o),m("meta",{property:"og:image"}).setAttribute("content",n),m("meta",{name:"twitter:card"}).setAttribute("content","summary_large_image"),m("meta",{name:"twitter:title"}).setAttribute("content",s),m("meta",{name:"twitter:description"}).setAttribute("content",t||""),m("meta",{name:"twitter:image"}).setAttribute("content",n)}var we=J();function _e({isOpen:r,onClose:t,pageTitle:e="ìš´ì„¸ë‰´ìŠ¤",shareText:n="ìœ ìš©í–ˆë‹¤ë©´ ì§€ì¸ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”!"}){const a=v.useRef(null),o=v.useRef(null),s=v.useRef(null),c=v.useRef(null),l=v.useRef(""),p=()=>{const{origin:h,pathname:u}=window.location;return`${h}${u}#/`},d=()=>{try{t?.()}catch{}},g=h=>{h.target===a.current&&d()},x=()=>{try{window.location.hash="#/"}finally{d()}},w=async()=>{const h=p();if(navigator.share){try{await navigator.share({title:e,text:n,url:h})}catch{}x();return}try{await navigator.clipboard.writeText(h),alert("í™ˆ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.")}catch{try{const u=document.createElement("textarea");u.value=h,u.setAttribute("readonly",""),u.style.position="fixed",u.style.opacity="0",document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),alert("í™ˆ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.")}catch{}}finally{x()}};if(v.useEffect(()=>{if(!r)return;try{document.body.classList.remove("scroll-lock")}catch{}l.current=document.body.style.overflow||"",document.body.style.overflow="hidden",c.current=document.activeElement;const h=setTimeout(()=>(s.current||o.current)?.focus(),0),u=y=>{if(y.key==="Escape"&&(y.preventDefault(),d()),y.key==="Tab"){const k=ve(o.current);if(!k.length){y.preventDefault(),o.current?.focus();return}const I=k[0],T=k[k.length-1];y.shiftKey&&document.activeElement===I?(y.preventDefault(),T.focus()):!y.shiftKey&&document.activeElement===T&&(y.preventDefault(),I.focus())}};return window.addEventListener("keydown",u),()=>{clearTimeout(h),window.removeEventListener("keydown",u),document.body.style.overflow=l.current||"";try{c.current?.focus?.()}catch{}}},[r]),!r)return null;const f=(()=>{try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}})(),j={position:"fixed",inset:0,zIndex:1e3,background:"color-mix(in oklab, black 38%, transparent)",display:"grid",placeItems:"center",padding:16,backdropFilter:"blur(2px)",animation:f?void 0:"fadeIn .16s ease-out"},A={width:"min(560px, 94vw)",background:"var(--surface, #fff)",color:"var(--ink, #111827)",border:"1px solid var(--border, #e5e7eb)",borderRadius:16,boxShadow:"0 20px 48px rgba(0,0,0,.16)",overflow:"hidden",outline:"none",display:"grid",gridTemplateRows:"auto 1fr auto",transform:f?"none":"translateY(6px)",animation:f?void 0:"popIn .18s ease-out"},L={padding:"16px 18px 12px",borderBottom:"1px solid var(--border, #e5e7eb)",display:"flex",alignItems:"center",gap:12},O={width:36,height:36,flex:"0 0 36px",display:"grid",placeItems:"center",borderRadius:12,color:"#fff",background:"linear-gradient(135deg, var(--accent, #7a5af8), #0fa958)",boxShadow:"0 6px 20px rgba(122,90,248,.25)",fontSize:18,fontWeight:800},P={display:"grid",gap:4},F={margin:0,fontSize:18,fontWeight:800,lineHeight:1.25},Y={margin:0,fontSize:13,color:"var(--ink-soft, #6b7280)"},G={padding:18,display:"grid",gap:12},z={padding:12,border:"1px solid var(--border, #e5e7eb)",borderRadius:12,background:"var(--surface, #fff)",fontSize:14,color:"var(--ink, #374151)",lineHeight:1.6},W={display:"flex",alignItems:"center",gap:8,padding:10,borderRadius:10,border:"1px dashed var(--border, #e5e7eb)",background:"color-mix(in oklab, var(--surface, #fff) 92%, #7a5af8 8%)",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',overflow:"hidden"},K={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:13,opacity:.9},U={padding:14,borderTop:"1px solid var(--border, #e5e7eb)",display:"flex",justifyContent:"flex-end",gap:8,background:"var(--surface, #fff)"},C=p(),q=i.jsxs("div",{ref:a,style:j,onClick:g,"data-testid":"share-backdrop",children:[i.jsxs("div",{ref:o,role:"dialog","aria-modal":"true","aria-labelledby":"share-title","aria-describedby":"share-desc",style:A,tabIndex:-1,onClick:h=>h.stopPropagation(),"data-testid":"share-modal",children:[i.jsxs("div",{style:L,children:[i.jsx("div",{style:O,"aria-hidden":!0,children:"ğŸ”—"}),i.jsxs("div",{style:P,children:[i.jsx("h3",{id:"share-title",style:F,children:"ê³µìœ í•˜ê¸°"}),i.jsx("p",{style:Y,children:"ì¹œêµ¬/ê°€ì¡±ì—ê²Œ ìš´ì„¸ë‰´ìŠ¤ë¥¼ ì•Œë ¤ë³´ì„¸ìš”"})]})]}),i.jsxs("div",{style:G,children:[i.jsxs("div",{id:"share-desc",style:z,children:[i.jsx("strong",{style:{fontWeight:800},children:e}),i.jsx("div",{style:{marginTop:6},children:n})]}),i.jsxs("div",{style:W,"aria-label":"ê³µìœ  ë§í¬",children:[i.jsx("span",{style:{opacity:.6},children:"URL"}),i.jsx("span",{style:K,title:C,children:C})]})]}),i.jsxs("div",{style:U,children:[i.jsx(D,{variant:"text",onClick:d,ref:s,"data-testid":"share-cancel",children:"ë‹¤ìŒì—"}),i.jsx(D,{onClick:w,"data-testid":"share-confirm",children:"ê³µìœ í•˜ê¸°"})]})]}),i.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
        @keyframes popIn {
          from { opacity: .001; transform: translateY(10px) scale(.98) }
          to   { opacity: 1;    transform: translateY(0)  scale(1) }
        }
        @media (prefers-reduced-motion: reduce){
          @keyframes fadeIn { from { opacity: 1 } to { opacity: 1 } }
          @keyframes popIn  { from { transform:none } to { transform:none } }
        }
      `})]});return we.createPortal(q,document.body)}function ve(r){if(!r)return[];const t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(r.querySelectorAll(t)).filter(e=>{const n=window.getComputedStyle(e);return n.display!=="none"&&n.visibility!=="hidden"})}export{je as P,_e as S,Ae as c,ke as s};

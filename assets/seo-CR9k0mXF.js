import{j as M}from"./index-DEUf_PyA.js";import{F as ct,E as rt,L as at,n as F,o as it,p as P,q as K}from"./cookieUtils-B8spcfGc.js";const ut={갑:"甲",을:"乙",병:"丙",정:"丁",무:"戊",기:"己",경:"庚",신:"辛",임:"壬",계:"癸"},ft={자:"子",축:"丑",인:"寅",묘:"卯",진:"辰",사:"巳",오:"午",미:"未",신:"申",유:"酉",술:"戌",해:"亥"};function mt(t){if(!t)return"";const e=String(t).trim();return/^[甲乙丙丁戊己庚辛壬癸]$/.test(e)?e:ut[e]||e}function dt(t){if(!t)return"";const e=String(t).trim();return/^[子丑寅卯辰巳午未申酉戌亥]$/.test(e)?e:ft[e]||e}function ht(t){return t?Array.isArray(t)?t.map(e=>e||{stem:"",branch:""}):[t.year,t.month,t.day,t.hour].map(e=>e||{stem:"",branch:""}):[]}function B(t){return ct[t]||""}function J(t){return rt[t]||""}const re=({pillars:t,idPrefix:e=""})=>{const n=ht(t),o=["연","월","일","시"],c=["year","month","day","hour"];return M.jsx("div",{className:"pillars",children:n.map((s,r)=>{const u=mt(s==null?void 0:s.stem),a=dt(s==null?void 0:s.branch),m=B(u)||B(s==null?void 0:s.stem),d=B(a)||B(s==null?void 0:s.branch),w=c[r],l=e?`${e}-${w}`:void 0;return M.jsxs("div",{className:"pillar","data-type":w,id:l,children:[M.jsx("h3",{children:o[r]}),M.jsxs("div",{className:"pill",children:[M.jsx("span",{className:m,children:u||"—"}),M.jsx("span",{children:"·"}),M.jsx("span",{className:d,children:a||"—"})]}),M.jsx("div",{className:"gx",children:[J(m),J(d)].filter(Boolean).join(" · ")})]},r)})})};function W(t,e,n){const o=Math.floor((14-e)/12),c=t+4800-o,s=e+12*o-3;return n+Math.floor((153*s+2)/5)+365*c+Math.floor(c/4)-Math.floor(c/100)+Math.floor(c/400)-32045}function ae(t,e,n,o=!1){const c=at.find(a=>a.lunar.year===t&&a.lunar.month===e&&a.lunar.day===n&&a.lunar.isLeap===o);if(c)return new Date(c.solar.year,c.solar.month-1,c.solar.day);if(t<1900||t>2029){const a=new Date(t,e-1,n);return a.setDate(a.getDate()+30),a}let s=0;for(let a=1900;a<t;a++)s+=lt(a);const r=tt(t);for(let a=1;a<e;a++)s+=V(t,a),a===r&&!o&&(s+=et(t));o&&e===r&&(s+=V(t,e)),s+=n-1;const u=new Date(1900,0,31);return new Date(u.getTime()+s*864e5)}function lt(t){let e=348;const n=F[t-1900];for(let o=32768;o>8;o>>=1)e+=n&o?1:0;return e+et(t)}function V(t,e){return F[t-1900]&65536>>e?30:29}function tt(t){return F[t-1900]&15}function et(t){return tt(t)?F[t-1900]&65536?30:29:0}const x=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],_=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],G={甲:"wood",乙:"wood",丙:"fire",丁:"fire",戊:"earth",己:"earth",庚:"metal",辛:"metal",壬:"water",癸:"water"},v={甲:1,丙:1,戊:1,庚:1,壬:1,乙:0,丁:0,己:0,辛:0,癸:0},wt={子:"water",丑:"earth",寅:"wood",卯:"wood",辰:"earth",巳:"fire",午:"fire",未:"earth",申:"metal",酉:"metal",戌:"earth",亥:"water"},y=(t,e)=>(t%e+e)%e,bt={子:["癸"],丑:["己","癸","辛"],寅:["甲","丙","戊"],卯:["甲","乙"],辰:["戊","乙","癸"],巳:["丙","戊","庚"],午:["丙","己","丁"],未:["己","乙","丁"],申:["戊","壬","庚"],酉:["辛"],戌:["戊","辛","丁"],亥:["戊","甲","壬"]},Et={子:"癸",丑:"己",寅:"甲",卯:"乙",辰:"戊",巳:"丙",午:"丙",未:"己",申:"庚",酉:"辛",戌:"戊",亥:"壬"},St=["장생","목욕","관대","건록","제왕","쇠","병","사","묘","절","태","양"],gt={甲:11,乙:6,丙:2,丁:9,戊:2,己:9,庚:5,辛:0,壬:8,癸:3},At={亥:{申:"겁살",卯:"육해살",亥:"망신살",午:"재살"}};function Q(t,e){if(!t||!e)return"";const n=G[t],o=G[e],c=v[t],s=v[e];return o===n?c===s?"비견":"겁재":n==="wood"&&o==="fire"||n==="fire"&&o==="earth"||n==="earth"&&o==="metal"||n==="metal"&&o==="water"||n==="water"&&o==="wood"?c===s?"식신":"상관":o==="wood"&&n==="fire"||o==="fire"&&n==="earth"||o==="earth"&&n==="metal"||o==="metal"&&n==="water"||o==="water"&&n==="wood"?c===s?"정인":"편인":n==="wood"&&o==="earth"||n==="fire"&&o==="metal"||n==="earth"&&o==="water"||n==="metal"&&o==="wood"||n==="water"&&o==="fire"?c===s?"편재":"정재":o==="wood"&&n==="earth"||o==="fire"&&n==="metal"||o==="earth"&&n==="water"||o==="metal"&&n==="wood"||o==="water"&&n==="fire"?c===s?"편관":"정관":""}function yt(t,e){const n=gt[t];if(n==null)return"";const o=_.indexOf(e);if(o<0)return"";const c=v[t]?1:-1,s=y((o-n)*c,12);return St[s]||""}function Mt(t,e){const n=At[t];return n&&n[e]||""}function Nt(t,e,n){if(!n||!n.useLocalSolar)return{hour:t,minute:e};const o=typeof n.longitude=="number"?n.longitude:126.9784,c=Math.round((135-o)*4);let s=t*60+e-c;return s=y(s,1440),{hour:Math.floor(s/60),minute:s%60}}function xt(t,e,n){let o=t;(e===1||e===2&&n<4)&&(o=t-1);const s=o-1984;return{stem:x[y(s,10)],branch:_[y(s,12)]}}function Dt(t,e,n,o){let c;e===2&&n>=4||e===3&&n<5?c=2:e===3&&n>=5||e===4&&n<4?c=3:e===4&&n>=4||e===5&&n<5?c=4:e===5&&n>=5||e===6&&n<5?c=5:e===6&&n>=5||e===7&&n<7?c=6:e===7&&n>=7||e===8&&n<7?c=7:e===8&&n>=7||e===9&&n<7?c=8:e===9&&n>=7||e===10&&n<8?c=9:e===10&&n>=8||e===11&&n<7?c=10:e===11&&n>=7||e===12&&n<7?c=11:e===12&&n>=7||e===1&&n<5?c=0:c=1;const s=x.indexOf(o);let r;s===0||s===5?r=2:s===1||s===6?r=4:s===2||s===7?r=6:s===3||s===8?r=8:r=0;const u=y(r+y(c-2,12),10);return{stem:x[u],branch:_[c]}}function Ht(t,e,n,o=0,c=0){let s=W(t,e,n);o*60+c>=23*60+30&&(s+=1);const r=W(1912,2,18),u=s-r;return{stem:x[y(u,10)],branch:_[y(u,12)]}}function Ot(t,e=0,n=0){const o=e*60+n,c=y(o-(23*60+30),1440),s=Math.floor(c/120),r=_[y(s,12)],u=x.indexOf(t);let a;return u===0||u===5?a=0:u===1||u===6?a=2:u===2||u===7?a=4:u===3||u===8?a=6:a=8,{stem:x[y(a+s,10)],branch:r}}function _t(t,e,n){const o=[[1,5,"소한"],[1,20,"대한"],[2,4,"입춘"],[2,19,"우수"],[3,6,"경칩"],[3,21,"춘분"],[4,5,"청명"],[4,20,"곡우"],[5,6,"입하"],[5,21,"소만"],[6,6,"망종"],[6,21,"하지"],[7,7,"소서"],[7,23,"대서"],[8,7,"입추"],[8,23,"처서"],[9,7,"백로"],[9,23,"추분"],[10,8,"한로"],[10,23,"상강"],[11,7,"입동"],[11,22,"소설"],[12,7,"대설"],[12,22,"동지"]],c=new Date(t,e-1,n);let s=o[0][2];for(const[r,u,a]of o){const m=new Date(t,r-1,u);c>=m&&(s=a)}return{name:s}}function ie(t,e,n,o=0,c=0,s={}){const{hour:r,minute:u}=Nt(o,c,s),a=xt(t,e,n),m=Dt(t,e,n,a.stem),d=Ht(t,e,n,r,u),w=Ot(d.stem,r,u),l=_t(t,e,n),b=E=>{const i=bt[E.branch]||[],f=Et[E.branch]||i[0];return{...E,tenGodStem:Q(d.stem,E.stem),tenGodBranch:f?Q(d.stem,f):"",hiddenStems:i,lifeStage:yt(d.stem,E.branch),shinsal:Mt(d.branch,E.branch)||"",elemStem:G[E.stem],elemBranch:wt[E.branch]}};return{year:b(a),month:b(m),day:b(d),hour:b(w),season:l}}const Tt={甲:"목",乙:"목",丙:"화",丁:"화",戊:"토",己:"토",庚:"금",辛:"금",壬:"수",癸:"수"},$t={子:"수",丑:"토",寅:"목",卯:"목",辰:"토",巳:"화",午:"화",未:"토",申:"금",酉:"금",戌:"토",亥:"수"},Bt={子:[{stem:"壬",w:1}],丑:[{stem:"己",w:.5},{stem:"癸",w:.3},{stem:"辛",w:.2}],寅:[{stem:"甲",w:.6},{stem:"丙",w:.3},{stem:"戊",w:.1}],卯:[{stem:"乙",w:1}],辰:[{stem:"戊",w:.5},{stem:"乙",w:.3},{stem:"癸",w:.2}],巳:[{stem:"丙",w:.6},{stem:"庚",w:.3},{stem:"戊",w:.1}],午:[{stem:"丁",w:.7},{stem:"己",w:.3}],未:[{stem:"己",w:.5},{stem:"丁",w:.3},{stem:"乙",w:.2}],申:[{stem:"庚",w:.7},{stem:"壬",w:.2},{stem:"戊",w:.1}],酉:[{stem:"辛",w:1}],戌:[{stem:"戊",w:.6},{stem:"辛",w:.3},{stem:"丁",w:.1}],亥:[{stem:"壬",w:.7},{stem:"甲",w:.3}]},Ft=[["子","午"],["丑","未"],["寅","申"],["卯","酉"],["辰","戌"],["巳","亥"]],X=[["子","未"],["丑","午"],["寅","巳"],["卯","辰"],["申","亥"],["酉","戌"]],Rt=[["子","卯"],["丑","戌"],["寅","亥"],["卯","子"],["辰","丑"],["巳","申"],["午","酉"],["未","辰"],["申","巳"],["酉","午"],["戌","未"],["亥","寅"]],jt=[["寅","巳","申"],["丑","戌","未"]],Ct=["辰","午","酉","子"],It=[{set:["亥","卯","未"],element:"목"},{set:["寅","午","戌"],element:"화"},{set:["巳","酉","丑"],element:"금"},{set:["申","子","辰"],element:"수"}],Lt=[{set:["亥","子","丑"],element:"수"},{set:["寅","卯","辰"],element:"목"},{set:["巳","午","未"],element:"화"},{set:["申","酉","戌"],element:"금"}],h=["목","화","토","금","수"],nt=(t,e)=>h[(h.indexOf(t)+1)%5]===e,Yt=(t,e)=>nt(e,t),ot=(t,e)=>h[(h.indexOf(t)+2)%5]===e,Gt=(t,e)=>ot(e,t),k=t=>(t??"").toString().trim(),D=t=>Tt[k(t)]||null,st=t=>$t[k(t)]||null,vt=t=>Array.from(new Set(t));function Pt(t,e={includeHidden:!0}){const n={목:0,화:0,토:0,금:0,수:0},o=(s,r=1)=>{n[s]!=null&&(n[s]+=r)},c=[t==null?void 0:t.year,t==null?void 0:t.month,t==null?void 0:t.day,t==null?void 0:t.hour].filter(Boolean);return c.forEach(s=>{const r=D(s.stem);r&&o(r,1)}),c.forEach(s=>{const r=st(s.branch);r&&o(r,.8)}),e.includeHidden&&c.forEach(s=>{(Bt[k(s.branch)]||[]).forEach(({stem:u,w:a})=>{const m=D(u);m&&o(m,a*.5)})}),n}function Kt(t){var H,T;const e=D((H=t==null?void 0:t.day)==null?void 0:H.stem);if(!e)return{score:0,level:"불명",rationale:"일간 미확인"};const n=Pt(t,{includeHidden:!0}),o=n[e]||0,c=h[(h.indexOf(e)+4)%5],s=h[(h.indexOf(e)+1)%5],r=h[(h.indexOf(e)+2)%5],u=h[(h.indexOf(e)+3)%5],a=n[c]||0,m=n[s]||0,d=n[r]||0,w=n[u]||0,l=(T=t==null?void 0:t.month)==null?void 0:T.branch,b=["寅","卯","辰"].includes(l)?"봄":["巳","午","未"].includes(l)?"여름":["申","酉","戌"].includes(l)?"가을":"겨울",i={봄:"목",여름:"화",가을:"금",겨울:"수"}[b]===e?.4:0,f=o*1+a*.7+m*.2+i-d*.6-w*.3;let N="중간";f>=2.8?N="신강":f<=1.8&&(N="신약");const R=`일간(${e}) 동류=${o.toFixed(1)}, 인성=${a.toFixed(1)}, 식상=${m.toFixed(1)}, 관살=${d.toFixed(1)}, 재성=${w.toFixed(1)}, 계절보정=${i.toFixed(1)} → 점수=${f.toFixed(2)}`;return{score:f,level:N,rationale:R,counts:n,monthGroup:b}}function kt(t){var w,l,b,E;const e=vt([(w=t==null?void 0:t.year)==null?void 0:w.branch,(l=t==null?void 0:t.month)==null?void 0:l.branch,(b=t==null?void 0:t.day)==null?void 0:b.branch,(E=t==null?void 0:t.hour)==null?void 0:E.branch].filter(Boolean)),n=(i,f)=>e.includes(i)&&e.includes(f),o=i=>i.every(f=>e.includes(f)),c=It.filter(i=>o(i.set)).map(i=>({type:"삼합",set:i.set,element:i.element})),s=Lt.filter(i=>o(i.set)).map(i=>({type:"방합",set:i.set,element:i.element})),r=Ft.filter(([i,f])=>n(i,f)).map(([i,f])=>({type:"충",pair:[i,f]})),u=X.filter(([i,f])=>n(i,f)).map(([i,f])=>({type:"해",pair:[i,f]})),a=Rt.filter(([i,f])=>n(i,f)).map(([i,f])=>({type:"파",pair:[i,f]})),m=[];jt.forEach(i=>{o(i)&&m.push({type:"형(삼형)",set:i})}),Ct.forEach(i=>{e.filter(N=>N===i).length>=2&&m.push({type:"형(자형)",pair:[i,i]})});const d=X.filter(([i,f])=>n(i,f)).map(([i,f])=>({type:"원진",pair:[i,f]}));return{samhap:c,banghap:s,chong:r,hae:u,pa:a,hyeong:m,wonjin:d}}function zt(t){var c,s,r;const e=D((c=t==null?void 0:t.day)==null?void 0:c.stem),n=st((s=t==null?void 0:t.month)==null?void 0:s.branch);if(!e||!n)return{type:"불명",basis:"일간/월지 확인 불가"};let o="잡격";return n===e?o="비견격":Yt(e,n)?o="인수격":nt(e,n)?o="식상격":Gt(e,n)?o="관살격":ot(e,n)&&(o="재격"),{type:o,basis:`월지(${(r=t==null?void 0:t.month)==null?void 0:r.branch}:${n}) vs 일간(${e}) 관계`}}function Ut(t,e){var w,l;const n=D((w=t==null?void 0:t.day)==null?void 0:w.stem);if(!n)return{flow:[],temperature:[],notes:[]};const o=(l=t==null?void 0:t.month)==null?void 0:l.branch,c=["寅","卯","辰"].includes(o)?"봄":["巳","午","未"].includes(o)?"여름":["申","酉","戌"].includes(o)?"가을":"겨울",s=h[(h.indexOf(n)+4)%5],r=h[(h.indexOf(n)+2)%5],u=h[(h.indexOf(n)+3)%5],a=(e==null?void 0:e.level)==="신약"?[n,s]:(e==null?void 0:e.level)==="신강"?[r,u]:[n,r],m=c==="겨울"?["화"]:c==="여름"?["수"]:c==="봄"?["금","수"]:["목","수"],d=[`계절=${c}, 일간=${n}, 신강도=${(e==null?void 0:e.level)||"불명"}`,`순환용신(휴리스틱)=${a.join(", ")}`,`조후용신(근사)=${m.join(", ")}`];return{flow:a,temperature:m,notes:d}}const qt=new Set(["甲","丙","戊","庚","壬"]);function Jt(t){return qt.has(t)}function Wt(t,e){const n=K.indexOf(t),o=P.indexOf(e);if(n<0||o<0)return-1;for(let c=0;c<60;c++)if(c%10===n&&c%12===o)return c;return-1}function Vt(t){const e=t%60%10,n=t%60%12;return{stem:K[e],branch:P[n]}}const Qt=["소한","입춘","경칩","청명","입하","망종","소서","입추","백로","한로","입동","대설"];function C(t){const e={};it.forEach(o=>{e[o.name]={month:o.month,day:o.approxDay}});const n=[];for(const o of Qt){const c=e[o];c&&n.push({name:o,date:new Date(t,c.month-1,c.day,0,0,0)})}return n}function Xt(t,e){return(e-t)/(1e3*60*60*24)}function Zt(t,e){var U,q;if(!(t!=null&&t.month)||!(t!=null&&t.year))return{direction:"불명",start:{years:0,months:0,days:0},list:[]};const n=new Date(e.y,(e.m||1)-1,e.d,e.hh||0,e.mm||0,0),o=e.gender!=="female",c=e.yearStem||t.year.stem,s=Jt(c),r=o&&s||!o&&!s,u=r?"순행":"역행",a=r?1:-1,m=n.getFullYear(),d=C(m),w=C(m+1),l=C(m-1);let b=null;if(r)b=[...d,...w].map(A=>A.date).find(A=>A.getTime()>n.getTime())||((U=w[0])==null?void 0:U.date);else{const S=[...l,...d].map(A=>A.date).filter(A=>A.getTime()<n.getTime());b=S[S.length-1]||((q=l[l.length-1])==null?void 0:q.date)}b||(b=new Date(m,n.getMonth(),n.getDate()+5));const E=Math.max(0,Math.round(Xt(n,b))),i=E*4,f=Math.floor(i/12),N=i%12,R=Wt(t.month.stem,t.month.branch),H=[],T=8;for(let S=1;S<=T;S++){const A=(R+a*S+60)%60,j=Vt(A),$=f+(S-1)*10,O=$+9;H.push({order:S,pillar:j,ageStart:$,ageEnd:O})}let z=null;try{const S=new Date(n.getTime()),A=S.getFullYear(),j=S.getMonth(),$=S.getDate(),O=new Date(A,j+i,$);z=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}-${String(O.getDate()).padStart(2,"0")}`}catch{}return{direction:u,start:{years:f,months:N,days:E},startDate:z,list:H}}const pt=["갑","을","병","정","무","기","경","신","임","계"],te=["자","축","인","묘","진","사","오","미","신","유","술","해"];function I(t){let e=(t-1984)%60;return e<0&&(e+=60),e}function Z(t){return{stem:pt[t%10],branch:te[t%12]}}function p(t){const e=t%60%10,n=t%60%12;return{stem:K[e],branch:P[n]}}function ee(t=new Date().getFullYear(),e=10){const n=[];for(let o=0;o<e;o++){const c=t+o,s=I(c);n.push({year:c,pillarKor:Z(s),pillarHan:p(s)})}return{currentYear:t,currentKor:Z(I(t)),currentHan:p(I(t)),list:n}}function ue(t,e={}){var m,d;const n=Kt(t),o=kt(t),c=zt(t),s=Ut(t,n);let r=null;e.birth&&e.birth.y&&(r=Zt(t,e.birth));const u=new Date().getFullYear(),a=ee(u,10);return{counts:n.counts,strength:{score:Number(((d=(m=n.score)==null?void 0:m.toFixed)==null?void 0:d.call(m,2))??n.score),level:n.level,rationale:n.rationale,monthGroup:n.monthGroup},relations:o,geoguk:c,yongshin:s,daewoon:r,sewoon:a}}function fe(t){return D(t)}const L={},Y="운세뉴스",ne=(L==null?void 0:L.VITE_SITE_URL)&&String(void 0)||(typeof window<"u"?window.location.origin:"https://idcode1690.github.io/unse");function g(t,e){const n=Object.entries(e).map(([c,s])=>`[${c}="${s}"]`).join("");let o=document.head.querySelector(`${t}${n}`);return o||(o=document.createElement(t),Object.entries(e).forEach(([c,s])=>o.setAttribute(c,s)),document.head.appendChild(o)),o}function oe(t){return!t||!t.trim()?Y:t.includes(Y)?t:`${t} | ${Y}`}function me({title:t,description:e,path:n="/",image:o="/og-image.png",noIndex:c=!1}){const s=`${ne}${n.startsWith("#")||n.startsWith("/")?n:`/${n}`}`,r=oe(t);document.title=r,e&&g("meta",{name:"description"}).setAttribute("content",e),g("meta",{name:"robots"}).setAttribute("content",c?"noindex,nofollow":"index,follow"),g("link",{rel:"canonical"}).setAttribute("href",s),g("meta",{property:"og:title"}).setAttribute("content",r),g("meta",{property:"og:description"}).setAttribute("content",e||""),g("meta",{property:"og:type"}).setAttribute("content","website"),g("meta",{property:"og:url"}).setAttribute("content",s),g("meta",{property:"og:image"}).setAttribute("content",o),g("meta",{name:"twitter:card"}).setAttribute("content","summary_large_image"),g("meta",{name:"twitter:title"}).setAttribute("content",r),g("meta",{name:"twitter:description"}).setAttribute("content",e||""),g("meta",{name:"twitter:image"}).setAttribute("content",o)}export{re as P,ue as a,Pt as b,ie as c,fe as g,Kt as i,ae as l,me as s};

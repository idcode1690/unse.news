import{j as n,a as q,r as j}from"./index-D43ed0fU.js";import{F as Q,E as J,t as B,B as H}from"./cookieUtils-CWbR3u9B.js";const V=()=>n.jsxs("div",{className:"guide-art","aria-hidden":"true",children:[n.jsxs("svg",{viewBox:"0 0 360 140",width:"100%",height:"140",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"잔잔한 하늘과 달, 천천히 일렁이는 파도",children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"sky",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"#7B61FF"}),n.jsx("stop",{offset:"70%",stopColor:"#5ac8ff"}),n.jsx("stop",{offset:"100%",stopColor:"#c7f9cc"})]}),n.jsxs("radialGradient",{id:"moonGlow",cx:"50%",cy:"50%",r:"60%",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,.9)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0)"})]}),n.jsx("filter",{id:"softBlur",x:"-20%",y:"-20%",width:"140%",height:"140%",children:n.jsx("feGaussianBlur",{stdDeviation:"4"})})]}),n.jsx("rect",{x:"0",y:"0",width:"360",height:"140",fill:"url(#sky)",rx:"12"}),n.jsxs("g",{className:"moon",children:[n.jsx("circle",{cx:"260",cy:"44",r:"16",fill:"#fff"}),n.jsx("circle",{cx:"260",cy:"44",r:"32",fill:"url(#moonGlow)"})]}),n.jsxs("g",{className:"stars",children:[n.jsx("circle",{cx:"40",cy:"26",r:"1.6",fill:"#fff",className:"star s1"}),n.jsx("circle",{cx:"95",cy:"18",r:"1.2",fill:"#fff",className:"star s2"}),n.jsx("circle",{cx:"140",cy:"34",r:"1.4",fill:"#fff",className:"star s3"}),n.jsx("circle",{cx:"190",cy:"14",r:"1.8",fill:"#fff",className:"star s4"}),n.jsx("circle",{cx:"310",cy:"30",r:"1.5",fill:"#fff",className:"star s5"}),n.jsx("circle",{cx:"330",cy:"68",r:"1.3",fill:"#fff",className:"star s6"})]}),n.jsxs("g",{className:"clouds",filter:"url(#softBlur)",children:[n.jsx("path",{d:"M40 62c10-10 28-12 40-4 8-8 26-8 34 0 8-5 18-4 24 2 7 7-2 16-24 16H52c-14 0-18-7-12-14Z",fill:"rgba(255,255,255,.25)"}),n.jsx("path",{d:"M210 60c10-8 24-10 34-3 6-6 18-6 24 0 6-4 14-3 18 1 6 6-2 13-18 13h-46c-11 0-14-6-8-11Z",fill:"rgba(255,255,255,.18)"})]}),n.jsxs("g",{className:"waves",children:[n.jsx("path",{d:"M0 110 Q 30 100 60 110 T 120 110 T 180 110 T 240 110 T 300 110 T 360 110 L 360 140 L 0 140 Z",fill:"rgba(255,255,255,.65)"}),n.jsx("path",{d:"M0 116 Q 36 108 72 116 T 144 116 T 216 116 T 288 116 T 360 116 L 360 140 L 0 140 Z",fill:"rgba(255,255,255,.45)"}),n.jsx("path",{d:"M0 122 Q 40 114 80 122 T 160 122 T 240 122 T 320 122 T 360 122 L 360 140 L 0 140 Z",fill:"rgba(255,255,255,.28)"})]})]}),n.jsx("style",{children:`
      .guide-art { display:flex; justify-content:center; margin-bottom:8px; }

      /* 천천히 */
      .moon { animation: floatY 16s ease-in-out infinite; }
      .clouds { animation: floatY 22s ease-in-out infinite reverse; }
      .waves path:nth-child(1) { animation: floatY 18s ease-in-out infinite; }
      .waves path:nth-child(2) { animation: floatY 20s ease-in-out infinite reverse; }
      .waves path:nth-child(3) { animation: floatY 24s ease-in-out infinite; }

      .star { animation: twinkle 5s ease-in-out infinite; opacity:.7; }
      .star.s2 { animation-duration: 4.4s; }
      .star.s3 { animation-duration: 5.6s; }
      .star.s4 { animation-duration: 6.0s; }
      .star.s5 { animation-duration: 4.8s; }
      .star.s6 { animation-duration: 5.2s; }

      @keyframes floatY {
        0%   { transform: translateY(0px); }
        50%  { transform: translateY(-4px); }
        100% { transform: translateY(0px); }
      }
      @keyframes twinkle {
        0%   { transform: scale(0.92); opacity: .40; }
        50%  { transform: scale(1.06); opacity: .98; }
        100% { transform: scale(0.92); opacity: .40; }
      }

      /* 모션 최소화 환경 존중 */
      @media (prefers-reduced-motion: reduce) {
        .moon, .clouds, .waves path, .star { animation: none !important; }
      }
    `})]}),X=({title:r="안내",lines:t=[],primary:e={label:"정보 입력하기",href:"/"},showArt:s=!0,children:o})=>n.jsxs("div",{className:"card result",style:{textAlign:"center",paddingTop:24,paddingBottom:28},children:[s&&n.jsx(V,{}),n.jsx("h2",{style:{margin:6},children:r}),t.map((a,i)=>n.jsx("p",{style:{color:"var(--ink-soft)",margin:i===0?"4px 0 0":"2px 0 14px"},children:a},i)),e&&(e.href?n.jsx("a",{href:e.href,className:"btn-primary",role:"button","aria-label":e.label,children:e.label}):n.jsx("button",{type:"button",className:"btn-primary",onClick:e.onClick,"aria-label":e.label,children:e.label})),o]}),Ne=({homeHref:r="/"})=>n.jsx(X,{title:"입력 정보가 필요해요",lines:["브라우저에 저장된 생년월일·시간 등의 입력이 없어 결과를 표시할 수 없습니다.","아래 버튼을 눌러 홈에서 정보를 입력한 뒤 다시 확인해주세요."],primary:{label:"정보 입력하기",href:r}}),ee={갑:"甲",을:"乙",병:"丙",정:"丁",무:"戊",기:"己",경:"庚",신:"辛",임:"壬",계:"癸"},te={자:"子",축:"丑",인:"寅",묘:"卯",진:"辰",사:"巳",오:"午",미:"未",신:"申",유:"酉",술:"戌",해:"亥"};function re(r){if(!r)return"";const t=String(r).trim();return/^[甲乙丙丁戊己庚辛壬癸]$/.test(t)?t:ee[t]||t}function ne(r){if(!r)return"";const t=String(r).trim();return/^[子丑寅卯辰巳午未申酉戌亥]$/.test(t)?t:te[t]||t}function se(r){return r?Array.isArray(r)?r.map(t=>t||{stem:"",branch:""}):[r.year,r.month,r.day,r.hour].map(t=>t||{stem:"",branch:""}):[]}function A(r){return Q[r]||""}function L(r){return J[r]||""}const Ae=({pillars:r,idPrefix:t=""})=>{const e=se(r),s=["연","월","일","시"],o=["year","month","day","hour"];return n.jsx("div",{className:"pillars",children:e.map((a,i)=>{const l=re(a?.stem),c=ne(a?.branch),x=A(l)||A(a?.stem),d=A(c)||A(a?.branch),y=o[i],g=t?`${t}-${y}`:void 0;return n.jsxs("div",{className:"pillar","data-type":y,id:g,children:[n.jsx("h3",{children:s[i]}),n.jsxs("div",{className:"pill",children:[n.jsx("span",{className:x,children:l||"—"}),n.jsx("span",{children:"·"}),n.jsx("span",{className:d,children:c||"—"})]}),n.jsx("div",{className:"gx",children:[L(x),L(d)].filter(Boolean).join(" · ")})]},i)})})},v=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],S=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],C={甲:"wood",乙:"wood",丙:"fire",丁:"fire",戊:"earth",己:"earth",庚:"metal",辛:"metal",壬:"water",癸:"water"},_={甲:1,丙:1,戊:1,庚:1,壬:1,乙:0,丁:0,己:0,辛:0,癸:0},ae={子:"water",丑:"earth",寅:"wood",卯:"wood",辰:"earth",巳:"fire",午:"fire",未:"earth",申:"metal",酉:"metal",戌:"earth",亥:"water"},p=(r,t)=>(r%t+t)%t,oe={子:["癸"],丑:["己","癸","辛"],寅:["甲","丙","戊"],卯:["甲","乙"],辰:["戊","乙","癸"],巳:["丙","戊","庚"],午:["丙","己","丁"],未:["己","乙","丁"],申:["戊","壬","庚"],酉:["辛"],戌:["戊","辛","丁"],亥:["戊","甲","壬"]},ie={子:"癸",丑:"己",寅:"甲",卯:"乙",辰:"戊",巳:"丙",午:"丙",未:"己",申:"庚",酉:"辛",戌:"戊",亥:"壬"},le=["장생","목욕","관대","건록","제왕","쇠","병","사","묘","절","태","양"],ce={甲:11,乙:6,丙:2,丁:9,戊:2,己:9,庚:5,辛:0,壬:8,癸:3},de={亥:{申:"겁살",卯:"육해살",亥:"망신살",午:"재살"}};function D(r,t){if(!r||!t)return"";const e=C[r],s=C[t],o=_[r],a=_[t];return s===e?o===a?"비견":"겁재":e==="wood"&&s==="fire"||e==="fire"&&s==="earth"||e==="earth"&&s==="metal"||e==="metal"&&s==="water"||e==="water"&&s==="wood"?o===a?"식신":"상관":s==="wood"&&e==="fire"||s==="fire"&&e==="earth"||s==="earth"&&e==="metal"||s==="metal"&&e==="water"||s==="water"&&e==="wood"?o===a?"정인":"편인":e==="wood"&&s==="earth"||e==="fire"&&s==="metal"||e==="earth"&&s==="water"||e==="metal"&&s==="wood"||e==="water"&&s==="fire"?o===a?"편재":"정재":s==="wood"&&e==="earth"||s==="fire"&&e==="metal"||s==="earth"&&e==="water"||s==="metal"&&e==="wood"||s==="water"&&e==="fire"?o===a?"편관":"정관":""}function fe(r,t){const e=ce[r];if(e==null)return"";const s=S.indexOf(t);if(s<0)return"";const o=_[r]?1:-1,a=p((s-e)*o,12);return le[a]||""}function ue(r,t){const e=de[r];return e&&e[t]||""}function me(r,t,e){if(!e||!e.useLocalSolar)return{hour:r,minute:t};const s=typeof e.longitude=="number"?e.longitude:126.9784,o=Math.round((135-s)*4);let a=r*60+t-o;return a=p(a,1440),{hour:Math.floor(a/60),minute:a%60}}function he(r,t,e){let s=r;(t===1||t===2&&e<4)&&(s=r-1);const a=s-1984;return{stem:v[p(a,10)],branch:S[p(a,12)]}}function pe(r,t,e,s){let o;t===2&&e>=4||t===3&&e<5?o=2:t===3&&e>=5||t===4&&e<4?o=3:t===4&&e>=4||t===5&&e<5?o=4:t===5&&e>=5||t===6&&e<5?o=5:t===6&&e>=5||t===7&&e<7?o=6:t===7&&e>=7||t===8&&e<7?o=7:t===8&&e>=7||t===9&&e<7?o=8:t===9&&e>=7||t===10&&e<8?o=9:t===10&&e>=8||t===11&&e<7?o=10:t===11&&e>=7||t===12&&e<7?o=11:t===12&&e>=7||t===1&&e<5?o=0:o=1;const a=v.indexOf(s);let i;a===0||a===5?i=2:a===1||a===6?i=4:a===2||a===7?i=6:a===3||a===8?i=8:i=0;const l=p(i+p(o-2,12),10);return{stem:v[l],branch:S[o]}}function xe(r,t,e,s=0,o=0){let a=B(r,t,e);s*60+o>=1410&&(a+=1);const i=B(1912,2,18),l=a-i;return{stem:v[p(l,10)],branch:S[p(l,12)]}}function be(r,t=0,e=0){const s=t*60+e,o=p(s-1410,1440),a=Math.floor(o/120),i=S[p(a,12)],l=v.indexOf(r);let c;return l===0||l===5?c=0:l===1||l===6?c=2:l===2||l===7?c=4:l===3||l===8?c=6:c=8,{stem:v[p(c+a,10)],branch:i}}function ye(r,t,e){const s=[[1,5,"소한"],[1,20,"대한"],[2,4,"입춘"],[2,19,"우수"],[3,6,"경칩"],[3,21,"춘분"],[4,5,"청명"],[4,20,"곡우"],[5,6,"입하"],[5,21,"소만"],[6,6,"망종"],[6,21,"하지"],[7,7,"소서"],[7,23,"대서"],[8,7,"입추"],[8,23,"처서"],[9,7,"백로"],[9,23,"추분"],[10,8,"한로"],[10,23,"상강"],[11,7,"입동"],[11,22,"소설"],[12,7,"대설"],[12,22,"동지"]],o=new Date(r,t-1,e);let a=s[0][2];for(const[i,l,c]of s){const x=new Date(r,i-1,l);o>=x&&(a=c)}return{name:a}}function Te(r,t,e,s=0,o=0,a={}){const{hour:i,minute:l}=me(s,o,a),c=he(r,t,e),x=pe(r,t,e,c.stem),d=xe(r,t,e,i,l),y=be(d.stem,i,l),g=ye(r,t,e),w=f=>{const E=oe[f.branch]||[],k=ie[f.branch]||E[0];return{...f,tenGodStem:D(d.stem,f.stem),tenGodBranch:k?D(d.stem,k):"",hiddenStems:E,lifeStage:fe(d.stem,f.branch),shinsal:ue(d.branch,f.branch)||"",elemStem:C[f.stem],elemBranch:ae[f.branch]}};return{year:w(c),month:w(x),day:w(d),hour:w(y),season:g}}const ge={},T="운세뉴스",we=ge?.VITE_SITE_URL&&String(void 0)||(typeof window<"u"?window.location.origin:"https://idcode1690.github.io/unse");function m(r,t){const e=Object.entries(t).map(([o,a])=>`[${o}="${a}"]`).join("");let s=document.head.querySelector(`${r}${e}`);return s||(s=document.createElement(r),Object.entries(t).forEach(([o,a])=>s.setAttribute(o,a)),document.head.appendChild(s)),s}function je(r){return!r||!r.trim()?T:r.includes(T)?r:`${r} | ${T}`}function Ce({title:r,description:t,path:e="/",image:s="/og-image.png",noIndex:o=!1}){const a=`${we}${e.startsWith("#")||e.startsWith("/")?e:`/${e}`}`,i=je(r);document.title=i,t&&m("meta",{name:"description"}).setAttribute("content",t),m("meta",{name:"robots"}).setAttribute("content",o?"noindex,nofollow":"index,follow"),m("link",{rel:"canonical"}).setAttribute("href",a),m("meta",{property:"og:title"}).setAttribute("content",i),m("meta",{property:"og:description"}).setAttribute("content",t||""),m("meta",{property:"og:type"}).setAttribute("content","website"),m("meta",{property:"og:url"}).setAttribute("content",a),m("meta",{property:"og:image"}).setAttribute("content",s),m("meta",{name:"twitter:card"}).setAttribute("content","summary_large_image"),m("meta",{name:"twitter:title"}).setAttribute("content",i),m("meta",{name:"twitter:description"}).setAttribute("content",t||""),m("meta",{name:"twitter:image"}).setAttribute("content",s)}var ve=q();function _e({isOpen:r,onClose:t,pageTitle:e="운세뉴스",shareText:s="유용했다면 지인에게 공유해보세요!"}){const o=j.useRef(null),a=j.useRef(null),i=j.useRef(null),l=j.useRef(null),c=j.useRef(""),x=()=>{const{origin:h,pathname:u}=window.location;return`${h}${u}#/`},d=()=>{try{t?.()}catch{}},y=h=>{h.target===o.current&&d()},g=()=>{try{window.location.hash="#/"}finally{d()}},w=async()=>{const h=x();if(navigator.share){try{await navigator.share({title:e,text:s,url:h})}catch{}g();return}try{await navigator.clipboard.writeText(h),alert("홈 링크를 클립보드에 복사했습니다.")}catch{try{const u=document.createElement("textarea");u.value=h,u.setAttribute("readonly",""),u.style.position="fixed",u.style.opacity="0",document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),alert("홈 링크를 클립보드에 복사했습니다.")}catch{}}finally{g()}};if(j.useEffect(()=>{if(!r)return;try{document.body.classList.remove("scroll-lock")}catch{}c.current=document.body.style.overflow||"",document.body.style.overflow="hidden",l.current=document.activeElement;const h=setTimeout(()=>(i.current||a.current)?.focus(),0),u=b=>{if(b.key==="Escape"&&(b.preventDefault(),d()),b.key==="Tab"){const N=Se(a.current);if(!N.length){b.preventDefault(),a.current?.focus();return}const M=N[0],I=N[N.length-1];b.shiftKey&&document.activeElement===M?(b.preventDefault(),I.focus()):!b.shiftKey&&document.activeElement===I&&(b.preventDefault(),M.focus())}};return window.addEventListener("keydown",u),()=>{clearTimeout(h),window.removeEventListener("keydown",u),document.body.style.overflow=c.current||"";try{l.current?.focus?.()}catch{}}},[r]),!r)return null;const f=(()=>{try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}})(),E={position:"fixed",inset:0,zIndex:1e3,background:"color-mix(in oklab, black 38%, transparent)",display:"grid",placeItems:"center",padding:16,backdropFilter:"blur(2px)",animation:f?void 0:"fadeIn .16s ease-out"},k={width:"min(560px, 94vw)",background:"var(--surface, #fff)",color:"var(--ink, #111827)",border:"1px solid var(--border, #e5e7eb)",borderRadius:16,boxShadow:"0 20px 48px rgba(0,0,0,.16)",overflow:"hidden",outline:"none",display:"grid",gridTemplateRows:"auto 1fr auto",transform:f?"none":"translateY(6px)",animation:f?void 0:"popIn .18s ease-out"},Y={padding:"16px 18px 12px",borderBottom:"1px solid var(--border, #e5e7eb)",display:"flex",alignItems:"center",gap:12},G={width:36,height:36,flex:"0 0 36px",display:"grid",placeItems:"center",borderRadius:12,color:"#fff",background:"linear-gradient(135deg, var(--accent, #7a5af8), #0fa958)",boxShadow:"0 6px 20px rgba(122,90,248,.25)",fontSize:18,fontWeight:800},$={display:"grid",gap:4},O={margin:0,fontSize:18,fontWeight:800,lineHeight:1.25},P={margin:0,fontSize:13,color:"var(--ink-soft, #6b7280)"},F={padding:18,display:"grid",gap:12},z={padding:12,border:"1px solid var(--border, #e5e7eb)",borderRadius:12,background:"var(--surface, #fff)",fontSize:14,color:"var(--ink, #374151)",lineHeight:1.6},W={display:"flex",alignItems:"center",gap:8,padding:10,borderRadius:10,border:"1px dashed var(--border, #e5e7eb)",background:"color-mix(in oklab, var(--surface, #fff) 92%, #7a5af8 8%)",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',overflow:"hidden"},K={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:13,opacity:.9},U={padding:14,borderTop:"1px solid var(--border, #e5e7eb)",display:"flex",justifyContent:"flex-end",gap:8,background:"var(--surface, #fff)"},R=x(),Z=n.jsxs("div",{ref:o,style:E,onClick:y,"data-testid":"share-backdrop",children:[n.jsxs("div",{ref:a,role:"dialog","aria-modal":"true","aria-labelledby":"share-title","aria-describedby":"share-desc",style:k,tabIndex:-1,onClick:h=>h.stopPropagation(),"data-testid":"share-modal",children:[n.jsxs("div",{style:Y,children:[n.jsx("div",{style:G,"aria-hidden":!0,children:"🔗"}),n.jsxs("div",{style:$,children:[n.jsx("h3",{id:"share-title",style:O,children:"공유하기"}),n.jsx("p",{style:P,children:"친구/가족에게 운세뉴스를 알려보세요"})]})]}),n.jsxs("div",{style:F,children:[n.jsxs("div",{id:"share-desc",style:z,children:[n.jsx("strong",{style:{fontWeight:800},children:e}),n.jsx("div",{style:{marginTop:6},children:s})]}),n.jsxs("div",{style:W,"aria-label":"공유 링크",children:[n.jsx("span",{style:{opacity:.6},children:"URL"}),n.jsx("span",{style:K,title:R,children:R})]})]}),n.jsxs("div",{style:U,children:[n.jsx(H,{variant:"text",onClick:d,ref:i,"data-testid":"share-cancel",children:"다음에"}),n.jsx(H,{onClick:w,"data-testid":"share-confirm",children:"공유하기"})]})]}),n.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
        @keyframes popIn {
          from { opacity: .001; transform: translateY(10px) scale(.98) }
          to   { opacity: 1;    transform: translateY(0)  scale(1) }
        }
        @media (prefers-reduced-motion: reduce){
          @keyframes fadeIn { from { opacity: 1 } to { opacity: 1 } }
          @keyframes popIn  { from { transform:none } to { transform:none } }
        }
      `})]});return ve.createPortal(Z,document.body)}function Se(r){if(!r)return[];const t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(r.querySelectorAll(t)).filter(e=>{const s=window.getComputedStyle(e);return s.display!=="none"&&s.visibility!=="hidden"})}export{Ne as I,Ae as P,_e as S,Te as c,Ce as s};

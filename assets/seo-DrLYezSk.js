import{j as y}from"./index-Ba2vumV5.js";import{F as nt,E as ot,L as st,n as T,o as rt,p as I,q as L}from"./index-DCrhh5Dy.js";const ct={갑:"甲",을:"乙",병:"丙",정:"丁",무:"戊",기:"己",경:"庚",신:"辛",임:"壬",계:"癸"},at={자:"子",축:"丑",인:"寅",묘:"卯",진:"辰",사:"巳",오:"午",미:"未",신:"申",유:"酉",술:"戌",해:"亥"};function it(t){if(!t)return"";const e=String(t).trim();return/^[甲乙丙丁戊己庚辛壬癸]$/.test(e)?e:ct[e]||e}function lt(t){if(!t)return"";const e=String(t).trim();return/^[子丑寅卯辰巳午未申酉戌亥]$/.test(e)?e:at[e]||e}function ut(t){return t?Array.isArray(t)?t.map(e=>e||{stem:"",branch:""}):[t.year,t.month,t.day,t.hour].map(e=>e||{stem:"",branch:""}):[]}function O(t){return nt[t]||""}function K(t){return ot[t]||""}const se=({pillars:t,idPrefix:e=""})=>{const n=ut(t),o=["연","월","일","시"],s=["year","month","day","hour"];return y.jsx("div",{className:"pillars",children:n.map((r,c)=>{const l=it(r?.stem),i=lt(r?.branch),f=O(l)||O(r?.stem),m=O(i)||O(r?.branch),a=s[c],u=e?`${e}-${a}`:void 0;return y.jsxs("div",{className:"pillar","data-type":a,id:u,children:[y.jsx("h3",{children:o[c]}),y.jsxs("div",{className:"pill",children:[y.jsx("span",{className:f,children:l||"—"}),y.jsx("span",{children:"·"}),y.jsx("span",{className:m,children:i||"—"})]}),y.jsx("div",{className:"gx",children:[K(f),K(m)].filter(Boolean).join(" · ")})]},c)})})};function k(t,e,n){const o=Math.floor((14-e)/12),s=t+4800-o,r=e+12*o-3;return n+Math.floor((153*r+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045}function re(t,e,n,o=!1){const s=st.find(i=>i.lunar.year===t&&i.lunar.month===e&&i.lunar.day===n&&i.lunar.isLeap===o);if(s)return new Date(s.solar.year,s.solar.month-1,s.solar.day);if(t<1900||t>2029){const i=new Date(t,e-1,n);return i.setDate(i.getDate()+30),i}let r=0;for(let i=1900;i<t;i++)r+=ft(i);const c=V(t);for(let i=1;i<e;i++)r+=z(t,i),i===c&&!o&&(r+=Q(t));o&&e===c&&(r+=z(t,e)),r+=n-1;const l=new Date(1900,0,31);return new Date(l.getTime()+r*864e5)}function ft(t){let e=348;const n=T[t-1900];for(let o=32768;o>8;o>>=1)e+=n&o?1:0;return e+Q(t)}function z(t,e){return T[t-1900]&65536>>e?30:29}function V(t){return T[t-1900]&15}function Q(t){return V(t)?T[t-1900]&65536?30:29:0}const _=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],D=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],v={甲:"wood",乙:"wood",丙:"fire",丁:"fire",戊:"earth",己:"earth",庚:"metal",辛:"metal",壬:"water",癸:"water"},C={甲:1,丙:1,戊:1,庚:1,壬:1,乙:0,丁:0,己:0,辛:0,癸:0},mt={子:"water",丑:"earth",寅:"wood",卯:"wood",辰:"earth",巳:"fire",午:"fire",未:"earth",申:"metal",酉:"metal",戌:"earth",亥:"water"},S=(t,e)=>(t%e+e)%e,dt={子:["癸"],丑:["己","癸","辛"],寅:["甲","丙","戊"],卯:["甲","乙"],辰:["戊","乙","癸"],巳:["丙","戊","庚"],午:["丙","己","丁"],未:["己","乙","丁"],申:["戊","壬","庚"],酉:["辛"],戌:["戊","辛","丁"],亥:["戊","甲","壬"]},ht={子:"癸",丑:"己",寅:"甲",卯:"乙",辰:"戊",巳:"丙",午:"丙",未:"己",申:"庚",酉:"辛",戌:"戊",亥:"壬"},wt=["장생","목욕","관대","건록","제왕","쇠","병","사","묘","절","태","양"],gt={甲:11,乙:6,丙:2,丁:9,戊:2,己:9,庚:5,辛:0,壬:8,癸:3},bt={亥:{申:"겁살",卯:"육해살",亥:"망신살",午:"재살"}};function U(t,e){if(!t||!e)return"";const n=v[t],o=v[e],s=C[t],r=C[e];return o===n?s===r?"비견":"겁재":n==="wood"&&o==="fire"||n==="fire"&&o==="earth"||n==="earth"&&o==="metal"||n==="metal"&&o==="water"||n==="water"&&o==="wood"?s===r?"식신":"상관":o==="wood"&&n==="fire"||o==="fire"&&n==="earth"||o==="earth"&&n==="metal"||o==="metal"&&n==="water"||o==="water"&&n==="wood"?s===r?"정인":"편인":n==="wood"&&o==="earth"||n==="fire"&&o==="metal"||n==="earth"&&o==="water"||n==="metal"&&o==="wood"||n==="water"&&o==="fire"?s===r?"편재":"정재":o==="wood"&&n==="earth"||o==="fire"&&n==="metal"||o==="earth"&&n==="water"||o==="metal"&&n==="wood"||o==="water"&&n==="fire"?s===r?"편관":"정관":""}function Et(t,e){const n=gt[t];if(n==null)return"";const o=D.indexOf(e);if(o<0)return"";const s=C[t]?1:-1,r=S((o-n)*s,12);return wt[r]||""}function St(t,e){const n=bt[t];return n&&n[e]||""}function pt(t,e,n){if(!n||!n.useLocalSolar)return{hour:t,minute:e};const o=typeof n.longitude=="number"?n.longitude:126.9784,s=Math.round((135-o)*4);let r=t*60+e-s;return r=S(r,1440),{hour:Math.floor(r/60),minute:r%60}}function At(t,e,n){let o=t;(e===1||e===2&&n<4)&&(o=t-1);const r=o-1984;return{stem:_[S(r,10)],branch:D[S(r,12)]}}function yt(t,e,n,o){let s;e===2&&n>=4||e===3&&n<5?s=2:e===3&&n>=5||e===4&&n<4?s=3:e===4&&n>=4||e===5&&n<5?s=4:e===5&&n>=5||e===6&&n<5?s=5:e===6&&n>=5||e===7&&n<7?s=6:e===7&&n>=7||e===8&&n<7?s=7:e===8&&n>=7||e===9&&n<7?s=8:e===9&&n>=7||e===10&&n<8?s=9:e===10&&n>=8||e===11&&n<7?s=10:e===11&&n>=7||e===12&&n<7?s=11:e===12&&n>=7||e===1&&n<5?s=0:s=1;const r=_.indexOf(o);let c;r===0||r===5?c=2:r===1||r===6?c=4:r===2||r===7?c=6:r===3||r===8?c=8:c=0;const l=S(c+S(s-2,12),10);return{stem:_[l],branch:D[s]}}function _t(t,e,n,o=0,s=0){let r=k(t,e,n);o*60+s>=1410&&(r+=1);const c=k(1912,2,18),l=r-c;return{stem:_[S(l,10)],branch:D[S(l,12)]}}function Mt(t,e=0,n=0){const o=e*60+n,s=S(o-1410,1440),r=Math.floor(s/120),c=D[S(r,12)],l=_.indexOf(t);let i;return l===0||l===5?i=0:l===1||l===6?i=2:l===2||l===7?i=4:l===3||l===8?i=6:i=8,{stem:_[S(i+r,10)],branch:c}}function Nt(t,e,n){const o=[[1,5,"소한"],[1,20,"대한"],[2,4,"입춘"],[2,19,"우수"],[3,6,"경칩"],[3,21,"춘분"],[4,5,"청명"],[4,20,"곡우"],[5,6,"입하"],[5,21,"소만"],[6,6,"망종"],[6,21,"하지"],[7,7,"소서"],[7,23,"대서"],[8,7,"입추"],[8,23,"처서"],[9,7,"백로"],[9,23,"추분"],[10,8,"한로"],[10,23,"상강"],[11,7,"입동"],[11,22,"소설"],[12,7,"대설"],[12,22,"동지"]],s=new Date(t,e-1,n);let r=o[0][2];for(const[c,l,i]of o){const f=new Date(t,c-1,l);s>=f&&(r=i)}return{name:r}}function ce(t,e,n,o=0,s=0,r={}){const{hour:c,minute:l}=pt(o,s,r),i=At(t,e,n),f=yt(t,e,n,i.stem),m=_t(t,e,n,c,l),a=Mt(m.stem,c,l),u=Nt(t,e,n),h=g=>{const A=dt[g.branch]||[],p=ht[g.branch]||A[0];return{...g,tenGodStem:U(m.stem,g.stem),tenGodBranch:p?U(m.stem,p):"",hiddenStems:A,lifeStage:Et(m.stem,g.branch),shinsal:St(m.branch,g.branch)||"",elemStem:v[g.stem],elemBranch:mt[g.branch]}};return{year:h(i),month:h(f),day:h(m),hour:h(a),season:u}}const xt={甲:"목",乙:"목",丙:"화",丁:"화",戊:"토",己:"토",庚:"금",辛:"금",壬:"수",癸:"수"},Dt={子:"수",丑:"토",寅:"목",卯:"목",辰:"토",巳:"화",午:"화",未:"토",申:"금",酉:"금",戌:"토",亥:"수"},Ht={子:[{stem:"壬",w:1}],丑:[{stem:"己",w:.5},{stem:"癸",w:.3},{stem:"辛",w:.2}],寅:[{stem:"甲",w:.6},{stem:"丙",w:.3},{stem:"戊",w:.1}],卯:[{stem:"乙",w:1}],辰:[{stem:"戊",w:.5},{stem:"乙",w:.3},{stem:"癸",w:.2}],巳:[{stem:"丙",w:.6},{stem:"庚",w:.3},{stem:"戊",w:.1}],午:[{stem:"丁",w:.7},{stem:"己",w:.3}],未:[{stem:"己",w:.5},{stem:"丁",w:.3},{stem:"乙",w:.2}],申:[{stem:"庚",w:.7},{stem:"壬",w:.2},{stem:"戊",w:.1}],酉:[{stem:"辛",w:1}],戌:[{stem:"戊",w:.6},{stem:"辛",w:.3},{stem:"丁",w:.1}],亥:[{stem:"壬",w:.7},{stem:"甲",w:.3}]},Ot=[["子","午"],["丑","未"],["寅","申"],["卯","酉"],["辰","戌"],["巳","亥"]],q=[["子","未"],["丑","午"],["寅","巳"],["卯","辰"],["申","亥"],["酉","戌"]],Tt=[["子","卯"],["丑","戌"],["寅","亥"],["卯","子"],["辰","丑"],["巳","申"],["午","酉"],["未","辰"],["申","巳"],["酉","午"],["戌","未"],["亥","寅"]],$t=[["寅","巳","申"],["丑","戌","未"]],Bt=["辰","午","酉","子"],Ft=[{set:["亥","卯","未"],element:"목"},{set:["寅","午","戌"],element:"화"},{set:["巳","酉","丑"],element:"금"},{set:["申","子","辰"],element:"수"}],Rt=[{set:["亥","子","丑"],element:"수"},{set:["寅","卯","辰"],element:"목"},{set:["巳","午","未"],element:"화"},{set:["申","酉","戌"],element:"금"}],d=["목","화","토","금","수"],X=(t,e)=>d[(d.indexOf(t)+1)%5]===e,jt=(t,e)=>X(e,t),Z=(t,e)=>d[(d.indexOf(t)+2)%5]===e,vt=(t,e)=>Z(e,t),Y=t=>(t??"").toString().trim(),M=t=>xt[Y(t)]||null,tt=t=>Dt[Y(t)]||null,Ct=t=>Array.from(new Set(t));function It(t,e={includeHidden:!0}){const n={목:0,화:0,토:0,금:0,수:0},o=(r,c=1)=>{n[r]!=null&&(n[r]+=c)},s=[t?.year,t?.month,t?.day,t?.hour].filter(Boolean);return s.forEach(r=>{const c=M(r.stem);c&&o(c,1)}),s.forEach(r=>{const c=tt(r.branch);c&&o(c,.8)}),e.includeHidden&&s.forEach(r=>{(Ht[Y(r.branch)]||[]).forEach(({stem:l,w:i})=>{const f=M(l);f&&o(f,i*.5)})}),n}function Lt(t){const e=M(t?.day?.stem);if(!e)return{score:0,level:"불명",rationale:"일간 미확인"};const n=It(t,{includeHidden:!0}),o=n[e]||0,s=d[(d.indexOf(e)+4)%5],r=d[(d.indexOf(e)+1)%5],c=d[(d.indexOf(e)+2)%5],l=d[(d.indexOf(e)+3)%5],i=n[s]||0,f=n[r]||0,m=n[c]||0,a=n[l]||0,u=t?.month?.branch,h=["寅","卯","辰"].includes(u)?"봄":["巳","午","未"].includes(u)?"여름":["申","酉","戌"].includes(u)?"가을":"겨울",A={봄:"목",여름:"화",가을:"금",겨울:"수"}[h]===e?.4:0,p=o*1+i*.7+f*.2+A-m*.6-a*.3;let N="중간";p>=2.8?N="신강":p<=1.8&&(N="신약");const $=`일간(${e}) 동류=${o.toFixed(1)}, 인성=${i.toFixed(1)}, 식상=${f.toFixed(1)}, 관살=${m.toFixed(1)}, 재성=${a.toFixed(1)}, 계절보정=${A.toFixed(1)} → 점수=${p.toFixed(2)}`;return{score:p,level:N,rationale:$,counts:n,monthGroup:h}}function Yt(t){const e=Ct([t?.year?.branch,t?.month?.branch,t?.day?.branch,t?.hour?.branch].filter(Boolean)),n=(a,u)=>e.includes(a)&&e.includes(u),o=a=>a.every(u=>e.includes(u)),s=Ft.filter(a=>o(a.set)).map(a=>({type:"삼합",set:a.set,element:a.element})),r=Rt.filter(a=>o(a.set)).map(a=>({type:"방합",set:a.set,element:a.element})),c=Ot.filter(([a,u])=>n(a,u)).map(([a,u])=>({type:"충",pair:[a,u]})),l=q.filter(([a,u])=>n(a,u)).map(([a,u])=>({type:"해",pair:[a,u]})),i=Tt.filter(([a,u])=>n(a,u)).map(([a,u])=>({type:"파",pair:[a,u]})),f=[];$t.forEach(a=>{o(a)&&f.push({type:"형(삼형)",set:a})}),Bt.forEach(a=>{e.filter(h=>h===a).length>=2&&f.push({type:"형(자형)",pair:[a,a]})});const m=q.filter(([a,u])=>n(a,u)).map(([a,u])=>({type:"원진",pair:[a,u]}));return{samhap:s,banghap:r,chong:c,hae:l,pa:i,hyeong:f,wonjin:m}}function Gt(t){const e=M(t?.day?.stem),n=tt(t?.month?.branch);if(!e||!n)return{type:"불명",basis:"일간/월지 확인 불가"};let o="잡격";return n===e?o="비견격":jt(e,n)?o="인수격":X(e,n)?o="식상격":vt(e,n)?o="관살격":Z(e,n)&&(o="재격"),{type:o,basis:`월지(${t?.month?.branch}:${n}) vs 일간(${e}) 관계`}}function Pt(t,e){const n=M(t?.day?.stem);if(!n)return{flow:[],temperature:[],notes:[]};const o=t?.month?.branch,s=["寅","卯","辰"].includes(o)?"봄":["巳","午","未"].includes(o)?"여름":["申","酉","戌"].includes(o)?"가을":"겨울",r=d[(d.indexOf(n)+4)%5],c=d[(d.indexOf(n)+2)%5],l=d[(d.indexOf(n)+3)%5],i=e?.level==="신약"?[n,r]:e?.level==="신강"?[c,l]:[n,c],f=s==="겨울"?["화"]:s==="여름"?["수"]:s==="봄"?["금","수"]:["목","수"],m=[`계절=${s}, 일간=${n}, 신강도=${e?.level||"불명"}`,`순환용신(휴리스틱)=${i.join(", ")}`,`조후용신(근사)=${f.join(", ")}`];return{flow:i,temperature:f,notes:m}}const Kt=new Set(["甲","丙","戊","庚","壬"]);function kt(t){return Kt.has(t)}function zt(t,e){const n=L.indexOf(t),o=I.indexOf(e);if(n<0||o<0)return-1;for(let s=0;s<60;s++)if(s%10===n&&s%12===o)return s;return-1}function Ut(t){const e=t%60%10,n=t%60%12;return{stem:L[e],branch:I[n]}}const qt=["소한","입춘","경칩","청명","입하","망종","소서","입추","백로","한로","입동","대설"];function F(t){const e={};rt.forEach(o=>{e[o.name]={month:o.month,day:o.approxDay}});const n=[];for(const o of qt){const s=e[o];s&&n.push({name:o,date:new Date(t,s.month-1,s.day,0,0,0)})}return n}function Jt(t,e){return(e-t)/(1e3*60*60*24)}function Wt(t,e){if(!t?.month||!t?.year)return{direction:"불명",start:{years:0,months:0,days:0},list:[]};const n=new Date(e.y,(e.m||1)-1,e.d,e.hh||0,e.mm||0,0),o=e.gender!=="female",s=e.yearStem||t.year.stem,r=kt(s),c=o&&r||!o&&!r,l=c?"순행":"역행",i=c?1:-1,f=n.getFullYear(),m=F(f),a=F(f+1),u=F(f-1);let h=null;if(c)h=[...m,...a].map(E=>E.date).find(E=>E.getTime()>n.getTime())||a[0]?.date;else{const w=[...u,...m].map(E=>E.date).filter(E=>E.getTime()<n.getTime());h=w[w.length-1]||u[u.length-1]?.date}h||(h=new Date(f,n.getMonth(),n.getDate()+5));const g=Math.max(0,Math.round(Jt(n,h))),A=g*4,p=Math.floor(A/12),N=A%12,$=zt(t.month.stem,t.month.branch),G=[],et=8;for(let w=1;w<=et;w++){const E=($+i*w+60)%60,B=Ut(E),H=p+(w-1)*10,x=H+9;G.push({order:w,pillar:B,ageStart:H,ageEnd:x})}let P=null;try{const w=new Date(n.getTime()),E=w.getFullYear(),B=w.getMonth(),H=w.getDate(),x=new Date(E,B+A,H);P=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`}catch{}return{direction:l,start:{years:p,months:N,days:g},startDate:P,list:G}}const Vt=["갑","을","병","정","무","기","경","신","임","계"],Qt=["자","축","인","묘","진","사","오","미","신","유","술","해"];function R(t){let e=(t-1984)%60;return e<0&&(e+=60),e}function J(t){return{stem:Vt[t%10],branch:Qt[t%12]}}function W(t){const e=t%60%10,n=t%60%12;return{stem:L[e],branch:I[n]}}function Xt(t=new Date().getFullYear(),e=10){const n=[];for(let o=0;o<e;o++){const s=t+o,r=R(s);n.push({year:s,pillarKor:J(r),pillarHan:W(r)})}return{currentYear:t,currentKor:J(R(t)),currentHan:W(R(t)),list:n}}function ae(t,e={}){const n=Lt(t),o=Yt(t),s=Gt(t),r=Pt(t,n);let c=null;e.birth&&e.birth.y&&(c=Wt(t,e.birth));const l=new Date().getFullYear(),i=Xt(l,10);return{counts:n.counts,strength:{score:Number(n.score?.toFixed?.(2)??n.score),level:n.level,rationale:n.rationale,monthGroup:n.monthGroup},relations:o,geoguk:s,yongshin:r,daewoon:c,sewoon:i}}function ie(t){return M(t)}const Zt={},j="운세뉴스",te=Zt?.VITE_SITE_URL&&String(void 0)||(typeof window<"u"?window.location.origin:"https://idcode1690.github.io/unse");function b(t,e){const n=Object.entries(e).map(([s,r])=>`[${s}="${r}"]`).join("");let o=document.head.querySelector(`${t}${n}`);return o||(o=document.createElement(t),Object.entries(e).forEach(([s,r])=>o.setAttribute(s,r)),document.head.appendChild(o)),o}function ee(t){return!t||!t.trim()?j:t.includes(j)?t:`${t} | ${j}`}function le({title:t,description:e,path:n="/",image:o="/og-image.png",noIndex:s=!1}){const r=`${te}${n.startsWith("#")||n.startsWith("/")?n:`/${n}`}`,c=ee(t);document.title=c,e&&b("meta",{name:"description"}).setAttribute("content",e),b("meta",{name:"robots"}).setAttribute("content",s?"noindex,nofollow":"index,follow"),b("link",{rel:"canonical"}).setAttribute("href",r),b("meta",{property:"og:title"}).setAttribute("content",c),b("meta",{property:"og:description"}).setAttribute("content",e||""),b("meta",{property:"og:type"}).setAttribute("content","website"),b("meta",{property:"og:url"}).setAttribute("content",r),b("meta",{property:"og:image"}).setAttribute("content",o),b("meta",{name:"twitter:card"}).setAttribute("content","summary_large_image"),b("meta",{name:"twitter:title"}).setAttribute("content",c),b("meta",{name:"twitter:description"}).setAttribute("content",e||""),b("meta",{name:"twitter:image"}).setAttribute("content",o)}export{se as P,ae as a,It as b,ce as c,ie as g,Lt as i,re as l,le as s};

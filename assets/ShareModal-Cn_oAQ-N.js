import{j as c,a as Nt,r as O}from"./index-Cq4ejKLT.js";import{F as kt,E as _t,t as ot,p as Mt,q as X,r as Q,B as st}from"./cookieUtils-CWdrEs-e.js";const $t={ê°‘:"ç”²",ì„:"ä¹™",ë³‘:"ä¸™",ì •:"ä¸",ë¬´:"æˆŠ",ê¸°:"å·±",ê²½:"åºš",ì‹ :"è¾›",ì„:"å£¬",ê³„:"ç™¸"},Tt={ì:"å­",ì¶•:"ä¸‘",ì¸:"å¯…",ë¬˜:"å¯",ì§„:"è¾°",ì‚¬:"å·³",ì˜¤:"åˆ",ë¯¸:"æœª",ì‹ :"ç”³",ìœ :"é…‰",ìˆ :"æˆŒ",í•´:"äº¥"};function Ot(e){if(!e)return"";const t=String(e).trim();return/^[ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸]$/.test(t)?t:$t[t]||t}function It(e){if(!e)return"";const t=String(e).trim();return/^[å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥]$/.test(t)?t:Tt[t]||t}function Dt(e){return e?Array.isArray(e)?e.map(t=>t||{stem:"",branch:""}):[e.year,e.month,e.day,e.hour].map(t=>t||{stem:"",branch:""}):[]}function Y(e){return kt[e]||""}function at(e){return _t[e]||""}const Pe=({pillars:e,idPrefix:t=""})=>{const n=Dt(e),r=["ì—°","ì›”","ì¼","ì‹œ"],o=["year","month","day","hour"];return c.jsx("div",{className:"pillars",children:n.map((s,i)=>{const l=Ot(s?.stem),m=It(s?.branch),u=Y(l)||Y(s?.stem),d=Y(m)||Y(s?.branch),a=o[i],f=t?`${t}-${a}`:void 0;return c.jsxs("div",{className:"pillar","data-type":a,id:f,children:[c.jsx("h3",{children:r[i]}),c.jsxs("div",{className:"pill",children:[c.jsx("span",{className:u,children:l||"â€”"}),c.jsx("span",{children:"Â·"}),c.jsx("span",{className:d,children:m||"â€”"})]}),c.jsx("div",{className:"gx",children:[at(u),at(d)].filter(Boolean).join(" Â· ")})]},i)})})};function M(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function C(e){return e=e.replace(/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g,(t,n,r)=>`<a href="${M(r)}" target="_blank" rel="noopener noreferrer">${M(n)}</a>`),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e}function Rt(e){if(!e)return"";const t=String(e).replace(/\r\n/g,`
`).split(`
`);let n=0,r="";const o=i=>{const l=[];for(;n<t.length&&i(t[n]);)l.push(t[n++]);return l},s=i=>{const l=i.join(`
`).trim();if(!l)return;const m=l.split(/\n{2,}/).map(u=>`<p>${C(M(u))}</p>`);r+=m.join("")};for(;n<t.length;){const i=t[n];if(/^\s*(-{3,}|\*{3,}|_{3,})\s*$/.test(i)){n++,r+="<hr/>";continue}const l=i.match(/^\s*(#{1,3})\s+(.+)$/);if(l){n++;const u=l[1].length,d=l[2].trim(),a=C(M(d));r+=`<h${u+1}>${a}</h${u+1}>`;continue}if(/^\s*>/.test(i)){const d=o(a=>/^\s*>/.test(a)).map(a=>a.replace(/^\s*>\s?/,"")).join(`
`).split(/\n{2,}/).map(a=>`<p>${C(M(a))}</p>`);r+=`<blockquote>${d.join("")}</blockquote>`;continue}if(/^\s*\d+\.\s+/.test(i)){const u=o(d=>/^\s*\d+\.\s+/.test(d)).map(d=>d.replace(/^\s*\d+\.\s+/,"")).map(d=>`<li>${C(M(d))}</li>`).join("");r+=`<ol>${u}</ol>`;continue}if(/^\s*([-*â€¢])\s+/.test(i)){const u=o(d=>/^\s*([-*â€¢])\s+/.test(d)).map(d=>d.replace(/^\s*([-*â€¢])\s+/,"")).map(d=>`<li>${C(M(d))}</li>`).join("");r+=`<ul>${u}</ul>`;continue}const m=[];for(;n<t.length&&!/^\s*$/.test(t[n]);)m.push(t[n++]);for(s(m);n<t.length&&/^\s*$/.test(t[n]);)n++}return r}const Ct=()=>c.jsxs("div",{className:"ai-loading",role:"img","aria-label":"ë¡œë”© ì¤‘",children:[c.jsxs("svg",{className:"ai-spinner",width:"96",height:"96",viewBox:"0 0 96 96",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"aiGrad",x1:"0",y1:"0",x2:"1",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#0a84ff"}),c.jsx("stop",{offset:"50%",stopColor:"#7a5af8"}),c.jsx("stop",{offset:"100%",stopColor:"#0fa958"})]})}),c.jsx("circle",{cx:"48",cy:"48",r:"32",fill:"none",stroke:"url(#aiGrad)",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:"160 60",children:c.jsx("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-440",dur:"1.2s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"48",cy:"48",r:"24",fill:"none",stroke:"rgba(0,0,0,.08)",strokeWidth:"2",strokeDasharray:"4 6",children:c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 48 48",to:"360 48 48",dur:"6s",repeatCount:"indefinite"})}),c.jsx("g",{transform:"translate(48,48)",children:c.jsxs("circle",{cx:"0",cy:"-24",r:"3.2",fill:"rgba(10,132,255,.85)",children:[c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0",to:"360",dur:"1.6s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"r",values:"3.2;5;3.2",dur:"1.6s",repeatCount:"indefinite"})]})}),c.jsx("g",{transform:"translate(48,48)",children:c.jsxs("circle",{cx:"0",cy:"18",r:"2.8",fill:"rgba(122,90,248,.9)",children:[c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"360",to:"0",dur:"2.4s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"r",values:"2.8;4;2.8",dur:"2.4s",repeatCount:"indefinite"})]})})]}),c.jsx("style",{children:`
      .ai-loading { display:grid; place-items:center; padding:10px 0 6px; }
      .ai-spinner { filter: drop-shadow(0 4px 18px rgba(122,90,248,.25)); }
      @media (prefers-reduced-motion: reduce){
        .ai-spinner animate, .ai-spinner animateTransform { display:none; }
      }
    `})]}),Ye=({content:e,isLoading:t,error:n})=>{if(t)return c.jsxs("div",{className:"ai-fortune",children:[c.jsxs("div",{className:"content",children:[c.jsx(Ct,{}),c.jsx("p",{"aria-live":"polite",children:"AIê°€ ë‚´ìš©ì„ ì¤€ë¹„í•˜ëŠ” ì¤‘â€¦"})]}),c.jsx("style",{children:`
          .ai-fortune .content { max-width:none; width:100%; margin:0; padding-right:0; box-sizing:border-box; }
          .ai-fortune .content p { margin: 10px 0; text-align:center; color: var(--ink-soft, #666); }
        `})]});if(n)return c.jsxs("div",{className:"ai-fortune",children:[c.jsxs("div",{className:"content",role:"alert",children:[c.jsx("p",{children:"ì‚¬ì£¼ í’€ì´ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}),c.jsxs("p",{children:[c.jsx("strong",{children:"ì˜¤ë¥˜ ë‚´ìš©:"})," ",String(n)]}),c.jsx("p",{children:"API í‚¤/ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” CORS ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”."})]}),c.jsx("style",{children:`
          .ai-fortune .content { max-width:none; width:100%; margin:0; padding-right:0; box-sizing:border-box; }
          .ai-fortune .content p { margin: 8px 0; line-height:1.7; }
        `})]});if(!e)return null;const r=Rt(e),o={"@context":"https://schema.org","@type":"Article",headline:"AI ì‚¬ì£¼ í’€ì´",author:{"@type":"Person",name:"AI Fortune"},datePublished:new Date().toISOString(),articleSection:"Horoscope",inLanguage:"ko"};return c.jsxs("div",{className:"ai-fortune",children:[c.jsxs("article",{className:"content",itemScope:!0,itemType:"https://schema.org/Article",children:[c.jsx("div",{itemProp:"articleBody",dangerouslySetInnerHTML:{__html:r}}),c.jsx("meta",{itemProp:"author",content:"AI Fortune"})]}),c.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(o)}}),c.jsx("style",{children:`
        .ai-fortune .content {
          max-width: none !important;
          width: 100% !important;
          margin: 0 !important;
          padding-right: 0 !important;
          box-sizing: border-box;
          line-height: 1.85;
          overflow-wrap: anywhere;
        }
        .ai-fortune .content h2,
        .ai-fortune .content h3,
        .ai-fortune .content h4 { text-align: left; }
        .ai-fortune .content p { margin: 10px 0; }
        .ai-fortune .content ul, 
        .ai-fortune .content ol { margin: 8px 0 8px 18px; }
        .ai-fortune .content a { color: var(--accent, #7a5af8); text-decoration: none; }
        .ai-fortune .content a:hover { text-decoration: underline; }
      `})]})},I=["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"],H=["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"],W={ç”²:"wood",ä¹™:"wood",ä¸™:"fire",ä¸:"fire",æˆŠ:"earth",å·±:"earth",åºš:"metal",è¾›:"metal",å£¬:"water",ç™¸:"water"},q={ç”²:1,ä¸™:1,æˆŠ:1,åºš:1,å£¬:1,ä¹™:0,ä¸:0,å·±:0,è¾›:0,ç™¸:0},Ht={å­:"water",ä¸‘:"earth",å¯…:"wood",å¯:"wood",è¾°:"earth",å·³:"fire",åˆ:"fire",æœª:"earth",ç”³:"metal",é…‰:"metal",æˆŒ:"earth",äº¥:"water"},A=(e,t)=>(e%t+t)%t,Ft={å­:["ç™¸"],ä¸‘:["å·±","ç™¸","è¾›"],å¯…:["ç”²","ä¸™","æˆŠ"],å¯:["ç”²","ä¹™"],è¾°:["æˆŠ","ä¹™","ç™¸"],å·³:["ä¸™","æˆŠ","åºš"],åˆ:["ä¸™","å·±","ä¸"],æœª:["å·±","ä¹™","ä¸"],ç”³:["æˆŠ","å£¬","åºš"],é…‰:["è¾›"],æˆŒ:["æˆŠ","è¾›","ä¸"],äº¥:["æˆŠ","ç”²","å£¬"]},Bt={å­:"ç™¸",ä¸‘:"å·±",å¯…:"ç”²",å¯:"ä¹™",è¾°:"æˆŠ",å·³:"ä¸™",åˆ:"ä¸™",æœª:"å·±",ç”³:"åºš",é…‰:"è¾›",æˆŒ:"æˆŠ",äº¥:"å£¬"},Pt=["ì¥ìƒ","ëª©ìš•","ê´€ëŒ€","ê±´ë¡","ì œì™•","ì‡ ","ë³‘","ì‚¬","ë¬˜","ì ˆ","íƒœ","ì–‘"],Yt={ç”²:11,ä¹™:6,ä¸™:2,ä¸:9,æˆŠ:2,å·±:9,åºš:5,è¾›:0,å£¬:8,ç™¸:3},Lt={äº¥:{ç”³:"ê²ì‚´",å¯:"ìœ¡í•´ì‚´",äº¥:"ë§ì‹ ì‚´",åˆ:"ì¬ì‚´"}};function it(e,t){if(!e||!t)return"";const n=W[e],r=W[t],o=q[e],s=q[t];return r===n?o===s?"ë¹„ê²¬":"ê²ì¬":n==="wood"&&r==="fire"||n==="fire"&&r==="earth"||n==="earth"&&r==="metal"||n==="metal"&&r==="water"||n==="water"&&r==="wood"?o===s?"ì‹ì‹ ":"ìƒê´€":r==="wood"&&n==="fire"||r==="fire"&&n==="earth"||r==="earth"&&n==="metal"||r==="metal"&&n==="water"||r==="water"&&n==="wood"?o===s?"ì •ì¸":"í¸ì¸":n==="wood"&&r==="earth"||n==="fire"&&r==="metal"||n==="earth"&&r==="water"||n==="metal"&&r==="wood"||n==="water"&&r==="fire"?o===s?"í¸ì¬":"ì •ì¬":r==="wood"&&n==="earth"||r==="fire"&&n==="metal"||r==="earth"&&n==="water"||r==="metal"&&n==="wood"||r==="water"&&n==="fire"?o===s?"í¸ê´€":"ì •ê´€":""}function Gt(e,t){const n=Yt[e];if(n==null)return"";const r=H.indexOf(t);if(r<0)return"";const o=q[e]?1:-1,s=A((r-n)*o,12);return Pt[s]||""}function Ut(e,t){const n=Lt[e];return n&&n[t]||""}function zt(e,t,n){if(!n||!n.useLocalSolar)return{hour:e,minute:t};const r=typeof n.longitude=="number"?n.longitude:126.9784,o=Math.round((135-r)*4);let s=e*60+t-o;return s=A(s,1440),{hour:Math.floor(s/60),minute:s%60}}function Jt(e,t,n){let r=e;(t===1||t===2&&n<4)&&(r=e-1);const s=r-1984;return{stem:I[A(s,10)],branch:H[A(s,12)]}}function Wt(e,t,n,r){let o;t===2&&n>=4||t===3&&n<5?o=2:t===3&&n>=5||t===4&&n<4?o=3:t===4&&n>=4||t===5&&n<5?o=4:t===5&&n>=5||t===6&&n<5?o=5:t===6&&n>=5||t===7&&n<7?o=6:t===7&&n>=7||t===8&&n<7?o=7:t===8&&n>=7||t===9&&n<7?o=8:t===9&&n>=7||t===10&&n<8?o=9:t===10&&n>=8||t===11&&n<7?o=10:t===11&&n>=7||t===12&&n<7?o=11:t===12&&n>=7||t===1&&n<5?o=0:o=1;const s=I.indexOf(r);let i;s===0||s===5?i=2:s===1||s===6?i=4:s===2||s===7?i=6:s===3||s===8?i=8:i=0;const l=A(i+A(o-2,12),10);return{stem:I[l],branch:H[o]}}function qt(e,t,n,r=0,o=0){let s=ot(e,t,n);r*60+o>=1410&&(s+=1);const i=ot(1912,2,18),l=s-i;return{stem:I[A(l,10)],branch:H[A(l,12)]}}function Vt(e,t=0,n=0){const r=t*60+n,o=A(r-1410,1440),s=Math.floor(o/120),i=H[A(s,12)],l=I.indexOf(e);let m;return l===0||l===5?m=0:l===1||l===6?m=2:l===2||l===7?m=4:l===3||l===8?m=6:m=8,{stem:I[A(m+s,10)],branch:i}}function Xt(e,t,n){const r=[[1,5,"ì†Œí•œ"],[1,20,"ëŒ€í•œ"],[2,4,"ì…ì¶˜"],[2,19,"ìš°ìˆ˜"],[3,6,"ê²½ì¹©"],[3,21,"ì¶˜ë¶„"],[4,5,"ì²­ëª…"],[4,20,"ê³¡ìš°"],[5,6,"ì…í•˜"],[5,21,"ì†Œë§Œ"],[6,6,"ë§ì¢…"],[6,21,"í•˜ì§€"],[7,7,"ì†Œì„œ"],[7,23,"ëŒ€ì„œ"],[8,7,"ì…ì¶”"],[8,23,"ì²˜ì„œ"],[9,7,"ë°±ë¡œ"],[9,23,"ì¶”ë¶„"],[10,8,"í•œë¡œ"],[10,23,"ìƒê°•"],[11,7,"ì…ë™"],[11,22,"ì†Œì„¤"],[12,7,"ëŒ€ì„¤"],[12,22,"ë™ì§€"]],o=new Date(e,t-1,n);let s=r[0][2];for(const[i,l,m]of r){const u=new Date(e,i-1,l);o>=u&&(s=m)}return{name:s}}function Le(e,t,n,r=0,o=0,s={}){const{hour:i,minute:l}=zt(r,o,s),m=Jt(e,t,n),u=Wt(e,t,n,m.stem),d=qt(e,t,n,i,l),a=Vt(d.stem,i,l),f=Xt(e,t,n),h=p=>{const b=Ft[p.branch]||[],y=Bt[p.branch]||b[0];return{...p,tenGodStem:it(d.stem,p.stem),tenGodBranch:y?it(d.stem,y):"",hiddenStems:b,lifeStage:Gt(d.stem,p.branch),shinsal:Ut(d.branch,p.branch)||"",elemStem:W[p.stem],elemBranch:Ht[p.branch]}};return{year:h(m),month:h(u),day:h(d),hour:h(a),season:f}}const Qt={ç”²:"ëª©",ä¹™:"ëª©",ä¸™:"í™”",ä¸:"í™”",æˆŠ:"í† ",å·±:"í† ",åºš:"ê¸ˆ",è¾›:"ê¸ˆ",å£¬:"ìˆ˜",ç™¸:"ìˆ˜"},Zt={å­:"ìˆ˜",ä¸‘:"í† ",å¯…:"ëª©",å¯:"ëª©",è¾°:"í† ",å·³:"í™”",åˆ:"í™”",æœª:"í† ",ç”³:"ê¸ˆ",é…‰:"ê¸ˆ",æˆŒ:"í† ",äº¥:"ìˆ˜"},Kt={å­:[{stem:"å£¬",w:1}],ä¸‘:[{stem:"å·±",w:.5},{stem:"ç™¸",w:.3},{stem:"è¾›",w:.2}],å¯…:[{stem:"ç”²",w:.6},{stem:"ä¸™",w:.3},{stem:"æˆŠ",w:.1}],å¯:[{stem:"ä¹™",w:1}],è¾°:[{stem:"æˆŠ",w:.5},{stem:"ä¹™",w:.3},{stem:"ç™¸",w:.2}],å·³:[{stem:"ä¸™",w:.6},{stem:"åºš",w:.3},{stem:"æˆŠ",w:.1}],åˆ:[{stem:"ä¸",w:.7},{stem:"å·±",w:.3}],æœª:[{stem:"å·±",w:.5},{stem:"ä¸",w:.3},{stem:"ä¹™",w:.2}],ç”³:[{stem:"åºš",w:.7},{stem:"å£¬",w:.2},{stem:"æˆŠ",w:.1}],é…‰:[{stem:"è¾›",w:1}],æˆŒ:[{stem:"æˆŠ",w:.6},{stem:"è¾›",w:.3},{stem:"ä¸",w:.1}],äº¥:[{stem:"å£¬",w:.7},{stem:"ç”²",w:.3}]},te=[["å­","åˆ"],["ä¸‘","æœª"],["å¯…","ç”³"],["å¯","é…‰"],["è¾°","æˆŒ"],["å·³","äº¥"]],ct=[["å­","æœª"],["ä¸‘","åˆ"],["å¯…","å·³"],["å¯","è¾°"],["ç”³","äº¥"],["é…‰","æˆŒ"]],ee=[["å­","å¯"],["ä¸‘","æˆŒ"],["å¯…","äº¥"],["å¯","å­"],["è¾°","ä¸‘"],["å·³","ç”³"],["åˆ","é…‰"],["æœª","è¾°"],["ç”³","å·³"],["é…‰","åˆ"],["æˆŒ","æœª"],["äº¥","å¯…"]],ne=[["å¯…","å·³","ç”³"],["ä¸‘","æˆŒ","æœª"]],re=["è¾°","åˆ","é…‰","å­"],oe=[{set:["äº¥","å¯","æœª"],element:"ëª©"},{set:["å¯…","åˆ","æˆŒ"],element:"í™”"},{set:["å·³","é…‰","ä¸‘"],element:"ê¸ˆ"},{set:["ç”³","å­","è¾°"],element:"ìˆ˜"}],se=[{set:["äº¥","å­","ä¸‘"],element:"ìˆ˜"},{set:["å¯…","å¯","è¾°"],element:"ëª©"},{set:["å·³","åˆ","æœª"],element:"í™”"},{set:["ç”³","é…‰","æˆŒ"],element:"ê¸ˆ"}],g=["ëª©","í™”","í† ","ê¸ˆ","ìˆ˜"],ht=(e,t)=>g[(g.indexOf(e)+1)%5]===t,ae=(e,t)=>ht(t,e),pt=(e,t)=>g[(g.indexOf(e)+2)%5]===t,ie=(e,t)=>pt(t,e),Z=e=>(e??"").toString().trim(),D=e=>Qt[Z(e)]||null,gt=e=>Zt[Z(e)]||null,ce=e=>Array.from(new Set(e));function le(e,t={includeHidden:!0}){const n={ëª©:0,í™”:0,í† :0,ê¸ˆ:0,ìˆ˜:0},r=(s,i=1)=>{n[s]!=null&&(n[s]+=i)},o=[e?.year,e?.month,e?.day,e?.hour].filter(Boolean);return o.forEach(s=>{const i=D(s.stem);i&&r(i,1)}),o.forEach(s=>{const i=gt(s.branch);i&&r(i,.8)}),t.includeHidden&&o.forEach(s=>{(Kt[Z(s.branch)]||[]).forEach(({stem:l,w:m})=>{const u=D(l);u&&r(u,m*.5)})}),n}function de(e){const t=D(e?.day?.stem);if(!t)return{score:0,level:"ë¶ˆëª…",rationale:"ì¼ê°„ ë¯¸í™•ì¸"};const n=le(e,{includeHidden:!0}),r=n[t]||0,o=g[(g.indexOf(t)+4)%5],s=g[(g.indexOf(t)+1)%5],i=g[(g.indexOf(t)+2)%5],l=g[(g.indexOf(t)+3)%5],m=n[o]||0,u=n[s]||0,d=n[i]||0,a=n[l]||0,f=e?.month?.branch,h=["å¯…","å¯","è¾°"].includes(f)?"ë´„":["å·³","åˆ","æœª"].includes(f)?"ì—¬ë¦„":["ç”³","é…‰","æˆŒ"].includes(f)?"ê°€ì„":"ê²¨ìš¸",b={ë´„:"ëª©",ì—¬ë¦„:"í™”",ê°€ì„:"ê¸ˆ",ê²¨ìš¸:"ìˆ˜"}[h]===t?.4:0,y=r*1+m*.7+u*.2+b-d*.6-a*.3;let v="ì¤‘ê°„";y>=2.8?v="ì‹ ê°•":y<=1.8&&(v="ì‹ ì•½");const N=`ì¼ê°„(${t}) ë™ë¥˜=${r.toFixed(1)}, ì¸ì„±=${m.toFixed(1)}, ì‹ìƒ=${u.toFixed(1)}, ê´€ì‚´=${d.toFixed(1)}, ì¬ì„±=${a.toFixed(1)}, ê³„ì ˆë³´ì •=${b.toFixed(1)} â†’ ì ìˆ˜=${y.toFixed(2)}`;return{score:y,level:v,rationale:N,counts:n,monthGroup:h}}function ue(e){const t=ce([e?.year?.branch,e?.month?.branch,e?.day?.branch,e?.hour?.branch].filter(Boolean)),n=(a,f)=>t.includes(a)&&t.includes(f),r=a=>a.every(f=>t.includes(f)),o=oe.filter(a=>r(a.set)).map(a=>({type:"ì‚¼í•©",set:a.set,element:a.element})),s=se.filter(a=>r(a.set)).map(a=>({type:"ë°©í•©",set:a.set,element:a.element})),i=te.filter(([a,f])=>n(a,f)).map(([a,f])=>({type:"ì¶©",pair:[a,f]})),l=ct.filter(([a,f])=>n(a,f)).map(([a,f])=>({type:"í•´",pair:[a,f]})),m=ee.filter(([a,f])=>n(a,f)).map(([a,f])=>({type:"íŒŒ",pair:[a,f]})),u=[];ne.forEach(a=>{r(a)&&u.push({type:"í˜•(ì‚¼í˜•)",set:a})}),re.forEach(a=>{t.filter(h=>h===a).length>=2&&u.push({type:"í˜•(ìí˜•)",pair:[a,a]})});const d=ct.filter(([a,f])=>n(a,f)).map(([a,f])=>({type:"ì›ì§„",pair:[a,f]}));return{samhap:o,banghap:s,chong:i,hae:l,pa:m,hyeong:u,wonjin:d}}function fe(e){const t=D(e?.day?.stem),n=gt(e?.month?.branch);if(!t||!n)return{type:"ë¶ˆëª…",basis:"ì¼ê°„/ì›”ì§€ í™•ì¸ ë¶ˆê°€"};let r="ì¡ê²©";return n===t?r="ë¹„ê²¬ê²©":ae(t,n)?r="ì¸ìˆ˜ê²©":ht(t,n)?r="ì‹ìƒê²©":ie(t,n)?r="ê´€ì‚´ê²©":pt(t,n)&&(r="ì¬ê²©"),{type:r,basis:`ì›”ì§€(${e?.month?.branch}:${n}) vs ì¼ê°„(${t}) ê´€ê³„`}}function me(e,t){const n=D(e?.day?.stem);if(!n)return{flow:[],temperature:[],notes:[]};const r=e?.month?.branch,o=["å¯…","å¯","è¾°"].includes(r)?"ë´„":["å·³","åˆ","æœª"].includes(r)?"ì—¬ë¦„":["ç”³","é…‰","æˆŒ"].includes(r)?"ê°€ì„":"ê²¨ìš¸",s=g[(g.indexOf(n)+4)%5],i=g[(g.indexOf(n)+2)%5],l=g[(g.indexOf(n)+3)%5],m=t?.level==="ì‹ ì•½"?[n,s]:t?.level==="ì‹ ê°•"?[i,l]:[n,i],u=o==="ê²¨ìš¸"?["í™”"]:o==="ì—¬ë¦„"?["ìˆ˜"]:o==="ë´„"?["ê¸ˆ","ìˆ˜"]:["ëª©","ìˆ˜"],d=[`ê³„ì ˆ=${o}, ì¼ê°„=${n}, ì‹ ê°•ë„=${t?.level||"ë¶ˆëª…"}`,`ìˆœí™˜ìš©ì‹ (íœ´ë¦¬ìŠ¤í‹±)=${m.join(", ")}`,`ì¡°í›„ìš©ì‹ (ê·¼ì‚¬)=${u.join(", ")}`];return{flow:m,temperature:u,notes:d}}const he=new Set(["ç”²","ä¸™","æˆŠ","åºš","å£¬"]);function pe(e){return he.has(e)}function ge(e,t){const n=Q.indexOf(e),r=X.indexOf(t);if(n<0||r<0)return-1;for(let o=0;o<60;o++)if(o%10===n&&o%12===r)return o;return-1}function ye(e){const t=e%60%10,n=e%60%12;return{stem:Q[t],branch:X[n]}}const xe=["ì†Œí•œ","ì…ì¶˜","ê²½ì¹©","ì²­ëª…","ì…í•˜","ë§ì¢…","ì†Œì„œ","ì…ì¶”","ë°±ë¡œ","í•œë¡œ","ì…ë™","ëŒ€ì„¤"];function U(e){const t={};Mt.forEach(r=>{t[r.name]={month:r.month,day:r.approxDay}});const n=[];for(const r of xe){const o=t[r];o&&n.push({name:r,date:new Date(e,o.month-1,o.day,0,0,0)})}return n}function be(e,t){return(t-e)/(1e3*60*60*24)}function we(e,t){if(!e?.month||!e?.year)return{direction:"ë¶ˆëª…",start:{years:0,months:0,days:0},list:[]};const n=new Date(t.y,(t.m||1)-1,t.d,t.hh||0,t.mm||0,0),r=t.gender!=="female",o=t.yearStem||e.year.stem,s=pe(o),i=r&&s||!r&&!s,l=i?"ìˆœí–‰":"ì—­í–‰",m=i?1:-1,u=n.getFullYear(),d=U(u),a=U(u+1),f=U(u-1);let h=null;if(i)h=[...d,...a].map(w=>w.date).find(w=>w.getTime()>n.getTime())||a[0]?.date;else{const x=[...f,...d].map(w=>w.date).filter(w=>w.getTime()<n.getTime());h=x[x.length-1]||f[f.length-1]?.date}h||(h=new Date(u,n.getMonth(),n.getDate()+5));const p=Math.max(0,Math.round(be(n,h))),b=p*4,y=Math.floor(b/12),v=b%12,N=ge(e.month.stem,e.month.branch),F=[],G=8;for(let x=1;x<=G;x++){const w=(N+m*x+60)%60,R=ye(w),T=y+(x-1)*10,_=T+9;F.push({order:x,pillar:R,ageStart:T,ageEnd:_})}let B=null;try{const x=new Date(n.getTime()),w=x.getFullYear(),R=x.getMonth(),T=x.getDate(),_=new Date(w,R+b,T);B=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`}catch{}return{direction:l,start:{years:y,months:v,days:p},startDate:B,list:F}}const ve=["ê°‘","ì„","ë³‘","ì •","ë¬´","ê¸°","ê²½","ì‹ ","ì„","ê³„"],Se=["ì","ì¶•","ì¸","ë¬˜","ì§„","ì‚¬","ì˜¤","ë¯¸","ì‹ ","ìœ ","ìˆ ","í•´"];function z(e){let t=(e-1984)%60;return t<0&&(t+=60),t}function lt(e){return{stem:ve[e%10],branch:Se[e%12]}}function dt(e){const t=e%60%10,n=e%60%12;return{stem:Q[t],branch:X[n]}}function je(e=new Date().getFullYear(),t=10){const n=[];for(let r=0;r<t;r++){const o=e+r,s=z(o);n.push({year:o,pillarKor:lt(s),pillarHan:dt(s)})}return{currentYear:e,currentKor:lt(z(e)),currentHan:dt(z(e)),list:n}}function Ge(e,t={}){const n=de(e),r=ue(e),o=fe(e),s=me(e,n);let i=null;t.birth&&t.birth.y&&(i=we(e,t.birth));const l=new Date().getFullYear(),m=je(l,10);return{counts:n.counts,strength:{score:Number(n.score?.toFixed?.(2)??n.score),level:n.level,rationale:n.rationale,monthGroup:n.monthGroup},relations:r,geoguk:o,yongshin:s,daewoon:i,sewoon:m}}function Ue(e){return D(e)}const yt=typeof navigator<"u"&&typeof navigator.vibrate=="function";function xt(){try{const e=navigator.userActivation;return!!(e?.isActive||e?.hasBeenActive)}catch{return!1}}function K(e=20){if(!yt||!xt())return!1;try{return navigator.vibrate(e)?!0:Array.isArray(e)?navigator.vibrate(20)||!1:navigator.vibrate([20,35,20])||!1}catch{return!1}}function bt(){if(yt&&xt())try{navigator.vibrate(0)}catch{}}function Ee(){K(20)}function ut(){bt(),K(30)}function ft(){bt(),K([25,40,25])}const wt=!1,Ae="https://cool-shape-9570.idcode1690.workers.dev",Ne=typeof location<"u"&&/github\.io|workers\.dev|vercel\.app|netlify\.app|unse\.news/i.test(location.host),V=wt&&!Ne?"/api/ai":`${Ae}/chat`;try{console.info("[openaiService] endpoint:",V,"mode=","production","dev=",wt)}catch{}const vt="ai_cache_v1:",L=new Map,tt=60*1e3,St=60*tt,$=24*St;function jt(){return Date.now()+9*St}function ke(){const e=jt(),t=$-e%$;return t>0?t:tt}function _e(){const e=jt(),n=new Date(e).getUTCDay(),r=e-e%$,o=(7-n)%7,i=r+(o===0?7:o)*$-e;return i>0?i:tt}function Et(e){const t=String(e||"").toUpperCase();return t.includes("TODAY")?ke():t.includes("SAJU")?365*$:t.includes("COMPAT")?30*$:t.includes("LOTTO")?_e():30*$}function Me(e){try{return localStorage.getItem(e)}catch{return null}}function $e(e,t){try{localStorage.setItem(e,t)}catch{}}function mt(e){try{localStorage.removeItem(e)}catch{}}function Te(e){if(!e)return null;const t=vt+e,n=Me(t);if(!n)return null;try{const{value:r,expireAt:o}=JSON.parse(n);return o&&Date.now()<o?String(r??""):(mt(t),null)}catch{return mt(t),null}}function Oe(e,t,n){if(!e)return;const r=vt+e,o=Date.now()+(n??Et(e));$e(r,JSON.stringify({value:String(t??""),expireAt:o}))}async function ze({messages:e,cacheKey:t,model:n="gpt-5.1-mini",temperature:r=.1,top_p:o=1,max_tokens:s=1800,seed:i=777}={}){const l=t?Te(t):null;if(l!=null&&l!==""){try{console.debug("[openaiService] cache HIT:",t)}catch{}return l}if(t&&L.has(t)){try{console.debug("[openaiService] inflight dedupe:",t)}catch{}return L.get(t)}const m={model:n,messages:e,cacheKey:t,temperature:r,top_p:o,max_tokens:s,seed:i},u=async a=>{const f=await fetch(a,{method:"POST",mode:"cors",credentials:"omit",cache:"no-store",headers:{"content-type":"text/plain;charset=UTF-8"},body:JSON.stringify(m),redirect:"follow",referrerPolicy:"no-referrer"}),h=await f.text();if(!f.ok){let v;try{v=JSON.parse(h)}catch{v={error:h}}const N=v?.error?.message||v?.error||h||"Unknown error";throw new Error(`OpenAI API ì˜¤ë¥˜ (${f.status}): ${typeof N=="string"?N:JSON.stringify(N)}`)}let p;try{p=JSON.parse(h)}catch{p=null}const b=p?.choices?.[0]?.message?.content??(p?"":h),y=String(b??"");return t&&y&&Oe(t,y,Et(t)),y};try{Ee()}catch{}const d=(async()=>{try{const a=await u(V);try{ut()}catch{}return a}catch(a){if((a?.name==="TypeError"||/Failed to fetch/i.test(String(a?.message||"")))&&V!=="/api/ai")try{console.warn("[openaiService] primary failed, fallback -> /api/ai",a);const h=await u("/api/ai");try{ut()}catch{}return h}catch(h){try{ft()}catch{}throw h}try{ft()}catch{}throw a}})();t&&L.set(t,d);try{return await d}finally{t&&L.delete(t)}}const Ie={},J="ìš´ì„¸ë‰´ìŠ¤",De=Ie?.VITE_SITE_URL&&String(void 0)||(typeof window<"u"?window.location.origin:"https://idcode1690.github.io/unse");function j(e,t){const n=Object.entries(t).map(([o,s])=>`[${o}="${s}"]`).join("");let r=document.head.querySelector(`${e}${n}`);return r||(r=document.createElement(e),Object.entries(t).forEach(([o,s])=>r.setAttribute(o,s)),document.head.appendChild(r)),r}function Re(e){return!e||!e.trim()?J:e.includes(J)?e:`${e} | ${J}`}function Je({title:e,description:t,path:n="/",image:r="/og-image.png",noIndex:o=!1}){const s=`${De}${n.startsWith("#")||n.startsWith("/")?n:`/${n}`}`,i=Re(e);document.title=i,t&&j("meta",{name:"description"}).setAttribute("content",t),j("meta",{name:"robots"}).setAttribute("content",o?"noindex,nofollow":"index,follow"),j("link",{rel:"canonical"}).setAttribute("href",s),j("meta",{property:"og:title"}).setAttribute("content",i),j("meta",{property:"og:description"}).setAttribute("content",t||""),j("meta",{property:"og:type"}).setAttribute("content","website"),j("meta",{property:"og:url"}).setAttribute("content",s),j("meta",{property:"og:image"}).setAttribute("content",r),j("meta",{name:"twitter:card"}).setAttribute("content","summary_large_image"),j("meta",{name:"twitter:title"}).setAttribute("content",i),j("meta",{name:"twitter:description"}).setAttribute("content",t||""),j("meta",{name:"twitter:image"}).setAttribute("content",r)}var Ce=Nt();function We({isOpen:e,onClose:t,pageTitle:n="ìš´ì„¸ë‰´ìŠ¤",shareText:r="ìœ ìš©í–ˆë‹¤ë©´ ì§€ì¸ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”!"}){const o=O.useRef(null),s=O.useRef(null),i=O.useRef(null),l=O.useRef(null),m=O.useRef(""),u=()=>{const{origin:E,pathname:S}=window.location;return`${E}${S}#/`},d=()=>{try{t?.()}catch{}},a=E=>{E.target===o.current&&d()},f=()=>{try{window.location.hash="#/"}finally{d()}},h=async()=>{const E=u();if(navigator.share){try{await navigator.share({title:n,text:r,url:E})}catch{}f();return}try{await navigator.clipboard.writeText(E),alert("í™ˆ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.")}catch{try{const S=document.createElement("textarea");S.value=E,S.setAttribute("readonly",""),S.style.position="fixed",S.style.opacity="0",document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S),alert("í™ˆ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.")}catch{}}finally{f()}};if(O.useEffect(()=>{if(!e)return;try{document.body.classList.remove("scroll-lock")}catch{}m.current=document.body.style.overflow||"",document.body.style.overflow="hidden",l.current=document.activeElement;const E=setTimeout(()=>(i.current||s.current)?.focus(),0),S=k=>{if(k.key==="Escape"&&(k.preventDefault(),d()),k.key==="Tab"){const P=He(s.current);if(!P.length){k.preventDefault(),s.current?.focus();return}const nt=P[0],rt=P[P.length-1];k.shiftKey&&document.activeElement===nt?(k.preventDefault(),rt.focus()):!k.shiftKey&&document.activeElement===rt&&(k.preventDefault(),nt.focus())}};return window.addEventListener("keydown",S),()=>{clearTimeout(E),window.removeEventListener("keydown",S),document.body.style.overflow=m.current||"";try{l.current?.focus?.()}catch{}}},[e]),!e)return null;const p=(()=>{try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}})(),b={position:"fixed",inset:0,zIndex:1e3,background:"color-mix(in oklab, black 38%, transparent)",display:"grid",placeItems:"center",padding:16,backdropFilter:"blur(2px)",animation:p?void 0:"fadeIn .16s ease-out"},y={width:"min(560px, 94vw)",background:"var(--surface, #fff)",color:"var(--ink, #111827)",border:"1px solid var(--border, #e5e7eb)",borderRadius:16,boxShadow:"0 20px 48px rgba(0,0,0,.16)",overflow:"hidden",outline:"none",display:"grid",gridTemplateRows:"auto 1fr auto",transform:p?"none":"translateY(6px)",animation:p?void 0:"popIn .18s ease-out"},v={padding:"16px 18px 12px",borderBottom:"1px solid var(--border, #e5e7eb)",display:"flex",alignItems:"center",gap:12},N={width:36,height:36,flex:"0 0 36px",display:"grid",placeItems:"center",borderRadius:12,color:"#fff",background:"linear-gradient(135deg, var(--accent, #7a5af8), #0fa958)",boxShadow:"0 6px 20px rgba(122,90,248,.25)",fontSize:18,fontWeight:800},F={display:"grid",gap:4},G={margin:0,fontSize:18,fontWeight:800,lineHeight:1.25},B={margin:0,fontSize:13,color:"var(--ink-soft, #6b7280)"},x={padding:18,display:"grid",gap:12},w={padding:12,border:"1px solid var(--border, #e5e7eb)",borderRadius:12,background:"var(--surface, #fff)",fontSize:14,color:"var(--ink, #374151)",lineHeight:1.6},R={display:"flex",alignItems:"center",gap:8,padding:10,borderRadius:10,border:"1px dashed var(--border, #e5e7eb)",background:"color-mix(in oklab, var(--surface, #fff) 92%, #7a5af8 8%)",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',overflow:"hidden"},T={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:13,opacity:.9},_={padding:14,borderTop:"1px solid var(--border, #e5e7eb)",display:"flex",justifyContent:"flex-end",gap:8,background:"var(--surface, #fff)"},et=u(),At=c.jsxs("div",{ref:o,style:b,onClick:a,"data-testid":"share-backdrop",children:[c.jsxs("div",{ref:s,role:"dialog","aria-modal":"true","aria-labelledby":"share-title","aria-describedby":"share-desc",style:y,tabIndex:-1,onClick:E=>E.stopPropagation(),"data-testid":"share-modal",children:[c.jsxs("div",{style:v,children:[c.jsx("div",{style:N,"aria-hidden":!0,children:"ğŸ”—"}),c.jsxs("div",{style:F,children:[c.jsx("h3",{id:"share-title",style:G,children:"ê³µìœ í•˜ê¸°"}),c.jsx("p",{style:B,children:"ì¹œêµ¬/ê°€ì¡±ì—ê²Œ ìš´ì„¸ë‰´ìŠ¤ë¥¼ ì•Œë ¤ë³´ì„¸ìš”"})]})]}),c.jsxs("div",{style:x,children:[c.jsxs("div",{id:"share-desc",style:w,children:[c.jsx("strong",{style:{fontWeight:800},children:n}),c.jsx("div",{style:{marginTop:6},children:r})]}),c.jsxs("div",{style:R,"aria-label":"ê³µìœ  ë§í¬",children:[c.jsx("span",{style:{opacity:.6},children:"URL"}),c.jsx("span",{style:T,title:et,children:et})]})]}),c.jsxs("div",{style:_,children:[c.jsx(st,{variant:"text",onClick:d,ref:i,"data-testid":"share-cancel",children:"ë‹¤ìŒì—"}),c.jsx(st,{onClick:h,"data-testid":"share-confirm",children:"ê³µìœ í•˜ê¸°"})]})]}),c.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
        @keyframes popIn {
          from { opacity: .001; transform: translateY(10px) scale(.98) }
          to   { opacity: 1;    transform: translateY(0)  scale(1) }
        }
        @media (prefers-reduced-motion: reduce){
          @keyframes fadeIn { from { opacity: 1 } to { opacity: 1 } }
          @keyframes popIn  { from { transform:none } to { transform:none } }
        }
      `})]});return Ce.createPortal(At,document.body)}function He(e){if(!e)return[];const t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(e.querySelectorAll(t)).filter(n=>{const r=window.getComputedStyle(n);return r.display!=="none"&&r.visibility!=="hidden"})}export{Ye as A,Pe as P,We as S,Ge as a,ze as b,Le as c,le as d,Ue as g,de as i,Je as s};
